{"version":3,"sources":["logo.svg","config.js","hash.js","store.js","components/AlbumList.js","api.js","components/RearrangeAlbums.js","components/PlaylistTable.js","components/HelpDialog.js","components/ActionButtons.js","components/AlbumChips.js","components/Logger.js","components/PlaylistAlbumsPage.js","components/UtilitiesPage.js","components/Main.js","App.js","index.js"],"names":["module","exports","__webpack_require__","p","scopes","hash","window","location","substring","split","reduce","initial","item","parts","decodeURIComponent","defaultUser","name","id","token","tokenms","allPlaylists","filteredPlaylists","selectedAlbums","allAlbums","selectedPlaylists","progress","done","total","percent","log","newLine","color","textColor","logline","user","logArray","push","text","start","normal","end","error","logEl","document","getElementById","scrollTop","scrollHeight","errors","store","localStorage","getItem","merge","JSON","parse","observe","setItem","stringify","useStyles","makeStyles","theme","root","width","backgroundColor","palette","background","paper","paddingLeft","list","position","overflow","maxHeight","Object","filter","obj","predicate","keys","key","res","view","props","classes","useEffect","_loadAlbums","asyncToGenerator","regenerator_default","a","mark","_callee","nextLink","i","wrap","_context","prev","next","axios","get","headers","Authorization","sent","data","items","length","concat","values","stop","apply","this","arguments","loadAlbums","handleListItemClick","event","indexOf","newSelectedAlbums","react_default","createElement","className","List","component","aria-label","Typography","variant","album","album_type","map","rDate","Date","release_date","ListItem","button","selected","onClick","style","paddingBottom","paddingTop","ListItemAvatar","Avatar","src","images","url","ListItemText","primary","secondary","toLocaleDateString","year","month","day","APIdelay","playlistBatch","_loop","_context2","status","console","playlist","newFiltered","owner","findIndex","delay","getPlaylistTracks","undefined","tracks","playlistData","external_urls","spotify","tracks_endpoint","href","description","albumsString","albums","lastUpdated","playlistMilliseconds","splice","t0","t1","value","delegateYield","_callee2","APItracks","hasLSAlbum","newData","_iterator","_step","track","trackAddedDate","_context3","_createForOfIteratorHelper","s","n","artists","abrupt","e","f","finish","place","duration_ms","added_at","entries","objectSpread","addAlbums","_x2","_x3","_addAlbums","_callee3","side","replaceArg","replace","albumDetails","delayms","trackURIs","newAlbumsString","addedTime","newAlbumsList","newTracksList","trackCount","numTracks","_loop2","j","k","_context5","resetProgress","uri","playlistId","playlistIndex","_res","trackURI","apiURL","newPlaylistData","_context4","uris","unshift","slice","put","Content-Type","post","cloneDeep","arrayConcat","now","toString","updateProgress","_callee4","_loop3","_context7","_context6","_callee5","_loop4","_context9","URIsToSend","_context8","_callee6","listString","listArray","idArray","_context10","questionmarkIndex","getFollowerCounts","_x6","_getFollowerCounts","_callee7","resultsArray","_context11","followers","join","_callee8","ms","_context12","timeout","arr1","arr2","forEach","Promise","setTimeout","title","fontSize","pos","marginBottom","modal","display","justifyContent","alignItems","_useState","useState","_useState2","slicedToArray","setAlbums","albumsInfo","onSave","_ref","oldSelection","oldPlaylistSelection","newSelection","api","close","Modal","open","onClose","aria-labelledby","aria-describedby","Card","CardContent","gutterBottom","index_es","setList","animation","CardActions","float","Button","tableWidth","setTableWidth","_useState3","_useState4","sortedAllPlaylists","setSortedAllPlaylists","_useState5","_useState6","rows","setRows","_useState7","_useState8","editAlbumsOpen","setEditAlbumsOpen","_useState9","_useState10","rearrangePlaylistSelection","setRearrangePlaylistSelection","w","innerWidth","addEventListener","_loadTable","search","newPlaylists","playlistInfo","toLowerCase","nameFormatter","_ref3","Tooltip","placement","columns","sortable","resizable","formatter","d","h","m","parseInt","Math","floor","_ref2","days","word","react_data_grid_default","rowGetter","rowsCount","minHeight","minWidth","rowSelection","showCheckbox","enableShiftSelect","onRowsSelected","newSelected","row","onRowsDeselected","selectBy","rowKey","onGridSort","sortColumn","sortDirection","initialRows","toConsumableArray","sort","b","sortRows","getCellActions","column","icon","Edit_default","callback","RearrangeAlbums","margin","marginRight","AlertDialog","Dialog","DialogTitle","DialogContent","size","clear","bg","flexWrap","progressBox","flexGrow","desc","setDesc","helpOpen","setHelpOpen","LinearProgress","flexBasis","textAlign","placeholder","onChange","target","padding","type","_x4","_replaceDescription","_refreshPlaylists","HelpDialog","listStyle","spacing","chip","Paper","albumID","index","Chip","chipToDelete","avatar","right","top","height","zIndex","transition","borderRadius","overflowY","PlaylistAlbumsPage","setSearch","left","components_AlbumList","components_AlbumChips","components_ActionButtons","sidebarWidth","TextField","label","components_PlaylistTable","components_Logger","UtilitiesAlbumPage","_React$useState","React","_React$useState2","followList","setFollowList","_React$useState3","_React$useState4","statsToGetList","setStatsToGetList","_React$useState5","_React$useState6","resultsListString","setResultsListString","_getFollowers","results","noValidate","autoComplete","multiline","defaultValue","marginTop","_x5","_followPlaylists","getFollowers","TabPanel","children","other","objectWithoutProperties","assign","role","hidden","Box","a11yProps","aria-controls","setValue","tokenTimeout","setTokenTimout","tokenTimeoutInterval","setInterval","_useAxios","useAxios","method","_useAxios2$","loading","display_name","AppBar","Tabs","newValue","Tab","ceil","components_PlaylistAlbumsPage","UtilitiesPage","LSTheme","createMuiTheme","main","App","_this","classCallCheck","_super","call","state","is_playing","progress_ms","_token","access_token","setState","ThemeProvider","textShadow","components_Main","Component","ReactDOM","render","src_App_0"],"mappings":"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","file":"static/js/main.55238bd1.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.ee7cd8ed.svg\";","export const authEndpoint = \"https://accounts.spotify.com/authorize\";\r\n\r\n// Replace with your app's client ID, redirect URI and desired scopes\r\nexport const clientId = \"149f235f7ad941419d900b585b05d9e3\";\r\n// export const redirectUri = \"http://localhost:3000/redirect\";\r\nexport const redirectUri = \"https://brandoshizzle.github.io/Little-Conductor/\";\r\nexport const scopes = [\r\n\t\"user-read-email\",\r\n\t\"playlist-modify-public\",\r\n\t\"playlist-modify-private\",\r\n];\r\n","// Get the hash of the url\r\nconst hash = window.location.hash\r\n  .substring(1)\r\n  .split(\"&\")\r\n  .reduce(function(initial, item) {\r\n    if (item) {\r\n      var parts = item.split(\"=\");\r\n      initial[parts[0]] = decodeURIComponent(parts[1]);\r\n    }\r\n    return initial;\r\n  }, {});\r\nwindow.location.hash = \"\";\r\n\r\nexport default hash;\r\n","import { store } from \"@risingstack/react-easy-state\";\r\nimport { observe } from \"@nx-js/observer-util\";\r\nimport merge from \"lodash/merge\";\r\n\r\nconst defaultUser = {\r\n\tname: \"\",\r\n\tid: \"\",\r\n\ttoken: \"\",\r\n\ttokenms: 0,\r\n\tallPlaylists: [],\r\n\tfilteredPlaylists: [],\r\n\tselectedAlbums: [],\r\n\tallAlbums: {},\r\n\tselectedPlaylists: [],\r\n\tprogress: {\r\n\t\tdone: 0,\r\n\t\ttotal: 0,\r\n\t\tpercent: 0,\r\n\t},\r\n\tlog: (newLine, color) => {\r\n\t\tconst textColor = color || \"normal\";\r\n\t\tconst colors = {\r\n\t\t\tstart: \"cornflowerblue\",\r\n\t\t\tnormal: \"#ddd\",\r\n\t\t\tend: \"lightgreen\",\r\n\t\t\terror: \"red\",\r\n\t\t};\r\n\t\tconst logline = \"> \" + newLine;\r\n\t\tuser.logArray.push({ text: logline, color: colors[textColor] });\r\n\t\tvar logEl = document.getElementById(\"logger\");\r\n\t\tlogEl.scrollTop = logEl.scrollHeight + 50;\r\n\t},\r\n\tlogArray: [],\r\n\terrors: [],\r\n};\r\n\r\nexport function addPlaylist(playlistData) {\r\n\tuser.allPlaylists.push({\r\n\t\tid: playlistData.id,\r\n\t\tname: playlistData.name,\r\n\t\turl: playlistData.external_urls.spotify,\r\n\t\ttracks_endpoint: playlistData.tracks.href,\r\n\t\tdescription: decodeURIComponent(playlistData.description),\r\n\t\ttracks: playlistData.tracks,\r\n\t\talbumsString: playlistData.albumsString,\r\n\t\talbums: playlistData.albums,\r\n\t\tlastUpdated: playlistData.lastUpdated,\r\n\t\tplaylistMilliseconds: playlistData.playlistMilliseconds,\r\n\t});\r\n}\r\n\r\nexport const user = store(\r\n\tlocalStorage.getItem(\"user\") != null\r\n\t\t? merge(defaultUser, JSON.parse(localStorage.getItem(\"user\")))\r\n\t\t: defaultUser\r\n);\r\n\r\nobserve(() => {\r\n\tlocalStorage.setItem(\"user\", JSON.stringify(user));\r\n});\r\n\r\nwindow.user = user;\r\n","import React, { useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n// import useAxios from 'axios-hooks';\r\nimport axios from \"axios\";\r\nimport { view } from \"@risingstack/react-easy-state\";\r\nimport { user } from \"./../store\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: \"100%\",\r\n\t\tbackgroundColor: theme.palette.background.paper,\r\n\t\tpaddingLeft: 10,\r\n\t},\r\n\tlist: {\r\n\t\tposition: \"relative\",\r\n\t\toverflow: \"auto\",\r\n\t\tmaxHeight: \"50vh\",\r\n\t},\r\n}));\r\n\r\nObject.filter = (obj, predicate) =>\r\n\tObject.keys(obj)\r\n\t\t.filter((key) => predicate(obj[key]))\r\n\t\t.reduce((res, key) => ((res[key] = obj[key]), res), {});\r\n\r\nconst AlbumList = (props) => {\r\n\tconst classes = useStyles();\r\n\tconst { token } = props;\r\n\t// const [selectedAlbums, setSelectedAlbums] = useState([]);\r\n\t// let [albums, setAlbums] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tasync function loadAlbums() {\r\n\t\t\tlet nextLink;\r\n\t\t\tuser.log(\"Getting LS albums...\");\r\n\t\t\tdo {\r\n\t\t\t\tlet res = await axios.get(\r\n\t\t\t\t\tnextLink ||\r\n\t\t\t\t\t\t\"https://api.spotify.com/v1/artists/4SCWiQbJCMTHK737aNUqBJ/albums?offset=0&limit=50&market=CA\",\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\tAuthorization: \"Bearer \" + token,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t\t// console.log(res);\r\n\t\t\t\t// albums = albums.concat(res.data.items);\r\n\t\t\t\t// console.log(user);\r\n\t\t\t\tfor (var i = 0; i < res.data.items.length; i++) {\r\n\t\t\t\t\tuser.allAlbums[res.data.items[i].id] = res.data.items[i];\r\n\t\t\t\t}\r\n\t\t\t\tnextLink = res.data.next;\r\n\t\t\t} while (nextLink);\r\n\t\t\tuser.log(`Loaded ${Object.values(user.allAlbums).length} albums`);\r\n\t\t}\r\n\t\t// Get all LS albums\r\n\t\tloadAlbums();\r\n\t\tuser.selectedAlbums = [];\r\n\t}, []);\r\n\r\n\tconst handleListItemClick = (event, id) => {\r\n\t\tif (user.selectedAlbums.indexOf(id) > -1) {\r\n\t\t\tconst newSelectedAlbums = user.selectedAlbums.filter(\r\n\t\t\t\t(item) => item !== id\r\n\t\t\t);\r\n\t\t\tuser.selectedAlbums = newSelectedAlbums;\r\n\t\t} else {\r\n\t\t\tuser.selectedAlbums = user.selectedAlbums.concat(id);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<List\r\n\t\t\t\tclassName={classes.list}\r\n\t\t\t\tcomponent=\"nav\"\r\n\t\t\t\taria-label=\"main mailbox folders\">\r\n\t\t\t\t<Typography variant=\"body1\">Albums</Typography>\r\n\t\t\t\t{user.allAlbums &&\r\n\t\t\t\t\tObject.values(\r\n\t\t\t\t\t\tObject.filter(\r\n\t\t\t\t\t\t\tuser.allAlbums,\r\n\t\t\t\t\t\t\t(album) => album.album_type === \"album\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t).map((album, i) => {\r\n\t\t\t\t\t\tconst rDate = new Date(album.release_date);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<ListItem\r\n\t\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\t\tselected={\r\n\t\t\t\t\t\t\t\t\tuser.selectedAlbums.indexOf(album.id) > -1\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonClick={(event) =>\r\n\t\t\t\t\t\t\t\t\thandleListItemClick(event, album.id)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tkey={album.id}\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tpaddingLeft: 0,\r\n\t\t\t\t\t\t\t\t\tpaddingBottom: 0,\r\n\t\t\t\t\t\t\t\t\tpaddingTop: 0,\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"square\"\r\n\t\t\t\t\t\t\t\t\t\tsrc={album.images[1].url}></Avatar>\r\n\t\t\t\t\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\tprimary={album.name}\r\n\t\t\t\t\t\t\t\t\tsecondary={rDate.toLocaleDateString(\r\n\t\t\t\t\t\t\t\t\t\t\"en-US\",\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tyear: \"numeric\",\r\n\t\t\t\t\t\t\t\t\t\t\tmonth: \"long\",\r\n\t\t\t\t\t\t\t\t\t\t\tday: \"numeric\",\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t\t<Typography variant=\"body1\">Singles</Typography>\r\n\t\t\t\t{user.allAlbums &&\r\n\t\t\t\t\tObject.values(\r\n\t\t\t\t\t\tObject.filter(\r\n\t\t\t\t\t\t\tuser.allAlbums,\r\n\t\t\t\t\t\t\t(album) => album.album_type === \"single\"\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t).map((album, i) => {\r\n\t\t\t\t\t\tconst rDate = new Date(album.release_date);\r\n\t\t\t\t\t\treturn (\r\n\t\t\t\t\t\t\t<ListItem\r\n\t\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\t\tselected={\r\n\t\t\t\t\t\t\t\t\tuser.selectedAlbums.indexOf(album.id) > -1\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tonClick={(event) =>\r\n\t\t\t\t\t\t\t\t\thandleListItemClick(event, album.id)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tkey={album.id}\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tpaddingLeft: 0,\r\n\t\t\t\t\t\t\t\t\tpaddingBottom: 0,\r\n\t\t\t\t\t\t\t\t\tpaddingTop: 0,\r\n\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"square\"\r\n\t\t\t\t\t\t\t\t\t\tsrc={album.images[1].url}></Avatar>\r\n\t\t\t\t\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\tprimary={album.name}\r\n\t\t\t\t\t\t\t\t\tsecondary={rDate.toLocaleDateString(\r\n\t\t\t\t\t\t\t\t\t\t\"en-US\",\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tyear: \"numeric\",\r\n\t\t\t\t\t\t\t\t\t\t\tmonth: \"long\",\r\n\t\t\t\t\t\t\t\t\t\t\tday: \"numeric\",\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t})}\r\n\t\t\t</List>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default view(AlbumList);\r\n","import { user, addPlaylist } from \"./store\";\r\nimport axios from \"axios\";\r\nimport cloneDeep from \"lodash/cloneDeep\";\r\n\r\nconst APIdelay = 300;\r\n\r\nexport async function loadTable() {\r\n\tlet nextLink;\r\n\tuser.log(`Fetching all of ${user.name}'s playlists`);\r\n\tlet res;\r\n\t// Loop until we get all playlists\r\n\tdo {\r\n\t\t// Get playlists from spotify\r\n\r\n\t\tres = await axios.get(\r\n\t\t\tnextLink || `https://api.spotify.com/v1/me/playlists?limit=50`,\r\n\t\t\t{\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAuthorization: \"Bearer \" + user.token,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t);\r\n\t\tif (res.status !== 201) {\r\n\t\t\tconsole.log(res);\r\n\t\t}\r\n\t\t// console.log(res);\r\n\t\tlet playlistBatch = res.data.items;\r\n\t\tuser.log(`Retrieved ${res.data.items.length} playlists`);\r\n\r\n\t\t// Loop through playlists in that batch\r\n\t\tfor (const i in playlistBatch) {\r\n\t\t\tlet playlist = playlistBatch[i];\r\n\t\t\t// Only get playlists that are owned by the logged in user\r\n\t\t\tif (playlist.owner.id === user.id) {\r\n\t\t\t\t// If we already have the playlist in our list for some reason, don't add it\r\n\t\t\t\tif (\r\n\t\t\t\t\tuser.allPlaylists.findIndex((p) => p.id === playlist.id) ===\r\n\t\t\t\t\t\t-1 &&\r\n\t\t\t\t\tuser.filteredPlaylists.indexOf(playlist.id) === -1\r\n\t\t\t\t) {\r\n\t\t\t\t\t// Get track and album details\r\n\t\t\t\t\tawait delay(APIdelay);\r\n\t\t\t\t\tplaylist = await getPlaylistTracks(playlist);\r\n\r\n\t\t\t\t\tif (playlist.tracks !== undefined) {\r\n\t\t\t\t\t\t// Add it to the store\r\n\t\t\t\t\t\tconsole.log(playlist);\r\n\t\t\t\t\t\taddPlaylist(playlist);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tuser.log(`${playlist.name} was not relaxing enough.`);\r\n\t\t\t\t\t\tconst newFiltered = user.filteredPlaylists.splice();\r\n\t\t\t\t\t\tnewFiltered.push(playlist.id);\r\n\t\t\t\t\t\tuser.filteredPlaylists = newFiltered;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t// If there's an API link for more, get more\r\n\t\tnextLink = res.data.next;\r\n\t} while (nextLink);\r\n}\r\n\r\nasync function getPlaylistTracks(playlist) {\r\n\tlet nextLink;\r\n\tlet APItracks = [];\r\n\tlet hasLSAlbum = false;\r\n\r\n\tconst newData = {\r\n\t\ttracks: [],\r\n\t\talbums: [],\r\n\t\talbumsString: \"\",\r\n\t\tlastUpdated: Date.parse(\"1980-01-01T12:00:00Z\"),\r\n\t\tplaylistMilliseconds: 0,\r\n\t};\r\n\r\n\t// Get all tracks on the playlist\r\n\tdo {\r\n\t\tlet res = await axios.get(\r\n\t\t\tnextLink ||\r\n\t\t\t\t`https://api.spotify.com/v1/playlists/${playlist.id}/tracks?fields=`,\r\n\t\t\t{\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAuthorization: \"Bearer \" + user.token,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t);\r\n\t\t// console.log(res);\r\n\t\tAPItracks = APItracks.concat(res.data.items);\r\n\t\tfor (const trackData of res.data.items) {\r\n\t\t\tif (trackData.track.artists[0].name === \"Little Symphony\") {\r\n\t\t\t\thasLSAlbum = true;\r\n\t\t\t\tbreak;\r\n\t\t\t}\r\n\t\t}\r\n\t\tnextLink = res.data.next;\r\n\t} while (nextLink && hasLSAlbum);\r\n\r\n\tif (!hasLSAlbum) {\r\n\t\tplaylist.tracks = undefined;\r\n\t\treturn playlist;\r\n\t}\r\n\r\n\tfor (const i in APItracks) {\r\n\t\tconst track = APItracks[i].track;\r\n\t\tnewData.tracks.push({\r\n\t\t\tplace: i,\r\n\t\t\tid: track.id,\r\n\t\t\tlength: track.duration_ms,\r\n\t\t\talbum: track.album.name,\r\n\t\t});\r\n\r\n\t\tnewData.playlistMilliseconds += track.duration_ms;\r\n\t\tconst trackAddedDate = Date.parse(APItracks[i].added_at);\r\n\r\n\t\t// Updated lastUpdated if trackAddedDate is later\r\n\t\tif (trackAddedDate > newData.lastUpdated) {\r\n\t\t\tnewData.lastUpdated = trackAddedDate;\r\n\t\t}\r\n\r\n\t\tif (newData.albumsString.indexOf(track.album.name) === -1) {\r\n\t\t\tnewData.albums.push({ id: track.album.id, name: track.album.name });\r\n\t\t\tnewData.albumsString += track.album.name + \", \";\r\n\t\t}\r\n\t}\r\n\r\n\tif (!hasLSAlbum && Object.entries(newData.tracks).length > 0) {\r\n\t\tnewData.tracks = undefined;\r\n\t}\r\n\r\n\t// Remove comma/space from album list\r\n\tnewData.albumsString = newData.albumsString.substring(\r\n\t\t0,\r\n\t\tnewData.albumsString.length - 2\r\n\t);\r\n\tplaylist = {\r\n\t\t...playlist,\r\n\t\t...newData,\r\n\t};\r\n\r\n\treturn playlist;\r\n}\r\n\r\nexport async function addAlbums(side, replaceArg) {\r\n\tresetProgress();\r\n\tconst replace = replaceArg === \"replace\" ? true : false;\r\n\tlet albumDetails = [];\r\n\tlet delayms = 0;\r\n\tlet trackURIs = [];\r\n\tlet newAlbumsString = \"\";\r\n\tlet addedTime = 0;\r\n\tlet newAlbumsList = [];\r\n\tlet newTracksList = [];\r\n\r\n\t// Tell the user what's up\r\n\tif (replace) {\r\n\t\tside = \"end\";\r\n\t\tuser.log(\r\n\t\t\t`It's time to replace ${user.selectedPlaylists.length} playlists with ${user.selectedAlbums.length} selected albums.`,\r\n\t\t\t\"start\"\r\n\t\t);\r\n\t} else {\r\n\t\tuser.log(\r\n\t\t\t`It's time to add ${user.selectedAlbums.length} albums to the ${side} of ${user.selectedPlaylists.length} playlists`,\r\n\t\t\t\"start\"\r\n\t\t);\r\n\t}\r\n\r\n\t// Get track information from each of the albums\r\n\tfor (var i = 0; i < user.selectedAlbums.length; i++) {\r\n\t\tuser.log(\r\n\t\t\t`Grabbing track info for ${\r\n\t\t\t\tuser.allAlbums[user.selectedAlbums[i]].name\r\n\t\t\t}`\r\n\t\t);\r\n\t\tlet res = await axios.get(\r\n\t\t\t`https://api.spotify.com/v1/albums/${user.selectedAlbums[i]}/tracks?limit=50`,\r\n\t\t\t{\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAuthorization: \"Bearer \" + user.token,\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t);\r\n\t\talbumDetails = albumDetails.concat(res.data);\r\n\t\tnewAlbumsString += `${user.allAlbums[user.selectedAlbums[i]].name}, `;\r\n\t\tnewAlbumsList.push(user.allAlbums[user.selectedAlbums[i]]);\r\n\t\t// console.log(albumDetails[0]);\r\n\t\tfor (\r\n\t\t\tvar trackCount = 0;\r\n\t\t\ttrackCount < albumDetails[i].total;\r\n\t\t\ttrackCount++\r\n\t\t) {\r\n\t\t\ttrackURIs.push(albumDetails[i].items[trackCount].uri);\r\n\t\t\taddedTime += albumDetails[i].items[trackCount].duration_ms;\r\n\t\t\tnewTracksList.push({\r\n\t\t\t\tplace: trackCount,\r\n\t\t\t\tid: albumDetails[i].items[trackCount].id,\r\n\t\t\t\tlength: albumDetails[i].items[trackCount].duration_ms,\r\n\t\t\t\talbum: user.selectedAlbums[i].name,\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t// console.log(newAlbumsList);\r\n\t// console.log(newTracksList);\r\n\tconst numTracks = trackURIs.length;\r\n\r\n\t// Go through each playlist and add the albums to it\r\n\tfor (var j = 0; j < user.selectedPlaylists.length; j++) {\r\n\t\tconst playlistId = user.selectedPlaylists[j];\r\n\t\tconst playlistIndex = user.allPlaylists.findIndex(\r\n\t\t\t(p) => p.id === playlistId\r\n\t\t);\r\n\t\tconst playlist = user.allPlaylists[playlistIndex];\r\n\t\tconsole.log(playlist.tracks);\r\n\t\t// Don't add album if it's already on the playlist\r\n\t\t// console.log(playlist.albumList, user.album.name, playlist.albumList.indexOf(user.album.name));\r\n\t\t// if (playlist.albumList.indexOf(user.album.name) === -1) {\r\n\t\tif (true) {\r\n\t\t\ttry {\r\n\t\t\t\tlet res;\r\n\t\t\t\tdo {\r\n\t\t\t\t\tlet data =\r\n\t\t\t\t\t\tside === \"start\"\r\n\t\t\t\t\t\t\t? {\r\n\t\t\t\t\t\t\t\t\turis: [],\r\n\t\t\t\t\t\t\t\t\tposition: 0,\r\n\t\t\t\t\t\t\t  }\r\n\t\t\t\t\t\t\t: {\r\n\t\t\t\t\t\t\t\t\turis: [],\r\n\t\t\t\t\t\t\t  };\r\n\t\t\t\t\tfor (var k = 0; k < trackURIs.length; k++) {\r\n\t\t\t\t\t\tlet trackURI;\r\n\t\t\t\t\t\tif (side === \"start\") {\r\n\t\t\t\t\t\t\ttrackURI = trackURIs[trackURIs.length - 1 - k];\r\n\t\t\t\t\t\t\tdata.uris.unshift(trackURI);\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttrackURI = trackURIs[k];\r\n\t\t\t\t\t\t\tdata.uris.push(trackURI);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (k === 99) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (side === \"start\") {\r\n\t\t\t\t\t\ttrackURIs = trackURIs.slice(0, -data.uris.length);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\ttrackURIs = trackURIs.slice(\r\n\t\t\t\t\t\t\tdata.uris.length,\r\n\t\t\t\t\t\t\ttrackURIs.length\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tconst apiURL = `https://api.spotify.com/v1/playlists/${playlist.id}/tracks`;\r\n\t\t\t\t\tif (\r\n\t\t\t\t\t\treplace &&\r\n\t\t\t\t\t\ttrackURIs.length + data.uris.length === numTracks\r\n\t\t\t\t\t) {\r\n\t\t\t\t\t\tres = await axios.put(apiURL, data, {\r\n\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\tAuthorization: \"Bearer \" + user.token,\r\n\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tres = await axios.post(apiURL, data, {\r\n\t\t\t\t\t\t\theaders: {\r\n\t\t\t\t\t\t\t\tAuthorization: \"Bearer \" + user.token,\r\n\t\t\t\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t} while (trackURIs.length > 0);\r\n\r\n\t\t\t\t// If successful, update local\r\n\t\t\t\t// console.log(res);\r\n\t\t\t\tif (res.status === 201) {\r\n\t\t\t\t\tif (replace) {\r\n\t\t\t\t\t\tuser.log(\r\n\t\t\t\t\t\t\t`Removed all previous albums from ${playlist.name}.`\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tuser.allPlaylists[playlistIndex].albumsString = \"\";\r\n\t\t\t\t\t\tuser.allPlaylists[playlistIndex].albums = [];\r\n\t\t\t\t\t\tuser.allPlaylists[playlistIndex].tracks = [];\r\n\t\t\t\t\t\tuser.allPlaylists[\r\n\t\t\t\t\t\t\tplaylistIndex\r\n\t\t\t\t\t\t].playlistMilliseconds = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuser.log(\r\n\t\t\t\t\t\t`Successfully plopped ${numTracks} beats onto ${playlist.name}.`\r\n\t\t\t\t\t);\r\n\t\t\t\t\t// Update list of albums\r\n\t\t\t\t\tlet newPlaylistData = cloneDeep(\r\n\t\t\t\t\t\tuser.allPlaylists[playlistIndex]\r\n\t\t\t\t\t);\r\n\t\t\t\t\tif (side === \"start\") {\r\n\t\t\t\t\t\tnewPlaylistData.albumsString =\r\n\t\t\t\t\t\t\tnewAlbumsString + newPlaylistData.albumsString;\r\n\r\n\t\t\t\t\t\tnewPlaylistData.albums = arrayConcat(\r\n\t\t\t\t\t\t\tnewAlbumsList,\r\n\t\t\t\t\t\t\tnewPlaylistData.albums\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tnewPlaylistData.tracks = arrayConcat(\r\n\t\t\t\t\t\t\tnewTracksList,\r\n\t\t\t\t\t\t\tnewPlaylistData.tracks\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tif (newPlaylistData.albumsString !== \"\") {\r\n\t\t\t\t\t\t\tnewPlaylistData.albumsString += \", \";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnewPlaylistData.albumsString =\r\n\t\t\t\t\t\t\tnewPlaylistData.albumsString +\r\n\t\t\t\t\t\t\tnewAlbumsString.substring(\r\n\t\t\t\t\t\t\t\t0,\r\n\t\t\t\t\t\t\t\tnewAlbumsString.length - 2\r\n\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\tnewPlaylistData.albums = arrayConcat(\r\n\t\t\t\t\t\t\tnewPlaylistData.albums,\r\n\t\t\t\t\t\t\tnewAlbumsList\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tnewPlaylistData.tracks = arrayConcat(\r\n\t\t\t\t\t\t\tnewPlaylistData.tracks,\r\n\t\t\t\t\t\t\tnewTracksList\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// Update total time\r\n\t\t\t\t\tnewPlaylistData.playlistMilliseconds += addedTime;\r\n\t\t\t\t\t// Update lastUpdated\r\n\t\t\t\t\tnewPlaylistData.lastUpdated = Date.now().toString();\r\n\t\t\t\t\t// Write back to state\r\n\t\t\t\t\tuser.allPlaylists[playlistIndex] = newPlaylistData;\r\n\t\t\t\t}\r\n\t\t\t} catch (err) {\r\n\t\t\t\tuser.log(\r\n\t\t\t\t\t`Houston, we had an issue with ${playlist.name}.`,\r\n\t\t\t\t\t\"error\"\r\n\t\t\t\t);\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tupdateProgress();\r\n\t\tdelayms += APIdelay;\r\n\t\tawait delay(delayms);\r\n\t}\r\n\r\n\tuser.log(`All finished big guy.`, \"end\");\r\n}\r\n\r\nexport async function replaceDescription(description) {\r\n\tresetProgress();\r\n\tlet delayms = 0;\r\n\tuser.log(\r\n\t\t`Description time! Changing the description of ${user.selectedPlaylists.length} playlists.`,\r\n\t\t\"start\"\r\n\t);\r\n\t// Go through each playlist and replace the description\r\n\tfor (var j = 0; j < user.selectedPlaylists.length; j++) {\r\n\t\tconst playlistId = user.selectedPlaylists[j];\r\n\t\tconst playlistIndex = user.allPlaylists.findIndex(\r\n\t\t\t(p) => p.id === playlistId\r\n\t\t);\r\n\t\tconst playlist = user.allPlaylists[playlistIndex];\r\n\t\tlet data = { description };\r\n\r\n\t\ttry {\r\n\t\t\tlet res = await axios.put(\r\n\t\t\t\t`https://api.spotify.com/v1/playlists/${playlist.id}/`,\r\n\t\t\t\tdata,\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: \"Bearer \" + user.token,\r\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\t// If successful, update local\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tuser.log(`Bam. Description of ${playlist.name} updated.`);\r\n\t\t\t\tplaylist.description = description;\r\n\t\t\t\tuser.allPlaylists[playlistIndex] = playlist;\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tuser.log(`Uh oh! There was an issue with .`);\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n\r\n\t\tupdateProgress();\r\n\t\tdelayms += APIdelay;\r\n\t\tawait delay(delayms);\r\n\t}\r\n\tresetProgress();\r\n\tuser.log(`We're done here.`, \"end\");\r\n}\r\n\r\n// Refresh: get list of playlist tracks and re-add them to playlist\r\nexport async function refreshPlaylists() {\r\n\tuser.log(\r\n\t\t`We're about to refresh ${user.selectedPlaylists.length} playlists.`,\r\n\t\t\"start\"\r\n\t);\r\n\tfor (var i = 0; i < user.selectedPlaylists.length; i++) {\r\n\t\tconst playlistId = user.selectedPlaylists[i];\r\n\t\tconst playlistIndex = user.allPlaylists.findIndex(\r\n\t\t\t(p) => p.id === playlistId\r\n\t\t);\r\n\t\tconst playlist = user.allPlaylists[playlistIndex];\r\n\r\n\t\tlet URIsToSend = [];\r\n\t\t// Get list of playlist tracks\r\n\t\tfor (var j = 0; j < Object.keys(playlist.tracks).length; j++) {\r\n\t\t\tURIsToSend.push(`spotify:track:${playlist.tracks[j].id}`);\r\n\t\t}\r\n\t\ttry {\r\n\t\t\tlet res;\r\n\t\t\t// Remove old tracks\r\n\t\t\tconst apiURL = `https://api.spotify.com/v1/playlists/${playlist.id}/tracks`;\r\n\t\t\tres = await axios.put(\r\n\t\t\t\tapiURL,\r\n\t\t\t\t{ uris: [] },\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: \"Bearer \" + user.token,\r\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t);\r\n\t\t\t// Add tracks back in batches of 100\r\n\t\t\tdo {\r\n\t\t\t\tconsole.log(URIsToSend);\r\n\t\t\t\tlet data = { uris: [] };\r\n\t\t\t\tfor (var k = 0; k < URIsToSend.length; k++) {\r\n\t\t\t\t\tdata.uris.push(URIsToSend[k]);\r\n\t\t\t\t\tif (k === 99) {\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tURIsToSend = URIsToSend.slice(\r\n\t\t\t\t\tdata.uris.length,\r\n\t\t\t\t\tURIsToSend.length\r\n\t\t\t\t);\r\n\t\t\t\tconsole.log(URIsToSend);\r\n\t\t\t\tconsole.log(data);\r\n\t\t\t\tres = await axios.post(apiURL, data, {\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: \"Bearer \" + user.token,\r\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t} while (URIsToSend.length > 0);\r\n\t\t\t// If successful, update local\r\n\t\t\tif (res.status === 201) {\r\n\t\t\t\tuser.log(`${playlist.name} is looking refreshed af.`, \"end\");\r\n\t\t\t} else {\r\n\t\t\t\tuser.log(\r\n\t\t\t\t\t`Refreshing ${playlist.name} gave us an error. Not cool man.`,\r\n\t\t\t\t\t\"error\"\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tuser.log(\r\n\t\t\t\t`Refreshing ${playlist.name} gave us an error. Not cool man.`,\r\n\t\t\t\t\"error\"\r\n\t\t\t);\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport async function followPlaylists(listString) {\r\n\tconst listArray = listString.split(\"\\n\");\r\n\t// Example format of one array element\r\n\t// https://open.spotify.com/playlist/7qJbIatA439sogHeQ0lOnS?si=qem5KAPzQ-2tD8RIVOf99A\r\n\tconst idArray = listArray.map((url) => {\r\n\t\tconst playlistIndex = url.indexOf(\"playlist\");\r\n\t\tconst questionmarkIndex = url.indexOf(\"?\");\r\n\t\treturn url.substring(playlistIndex + 9, questionmarkIndex);\r\n\t});\r\n\r\n\tuser.log(`We're about to follow ${idArray.length} playlists.`, \"start\");\r\n\tfor (var i = 0; i < idArray.length; i++) {\r\n\t\tconst playlistId = idArray[i];\r\n\t\tconsole.log(playlistId);\r\n\t\ttry {\r\n\t\t\tlet res;\r\n\t\t\t// Remove old tracks\r\n\t\t\tconst apiURL = `https://api.spotify.com/v1/playlists/${playlistId}/followers`;\r\n\t\t\tres = await axios.put(\r\n\t\t\t\tapiURL,\r\n\t\t\t\t{},\r\n\t\t\t\t{\r\n\t\t\t\t\theaders: {\r\n\t\t\t\t\t\tAuthorization: \"Bearer \" + user.token,\r\n\t\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t\t},\r\n\t\t\t\t}\r\n\t\t\t);\r\n\r\n\t\t\t// If successful, update local\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tuser.log(`${idArray[i]} has been followed.`);\r\n\t\t\t} else {\r\n\t\t\t\tuser.log(\r\n\t\t\t\t\t`Following ${listArray[i]} gave us an error. Not cool man.`,\r\n\t\t\t\t\t\"error\"\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tuser.log(\r\n\t\t\t\t`Following ${listArray[i]} gave us an error. Not cool man.`,\r\n\t\t\t\t\"error\"\r\n\t\t\t);\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n\t}\r\n\tuser.log(`All done boss.`, \"end\");\r\n}\r\n\r\nexport async function getFollowerCounts(listString) {\r\n\tlet resultsArray = [];\r\n\tconst listArray = listString.split(\"\\n\");\r\n\t// Example format of one array element\r\n\t// https://open.spotify.com/playlist/7qJbIatA439sogHeQ0lOnS?si=qem5KAPzQ-2tD8RIVOf99A\r\n\tconst idArray = listArray.map((url) => {\r\n\t\tconst playlistIndex = url.indexOf(\"playlist\");\r\n\t\tlet questionmarkIndex = url.indexOf(\"?\");\r\n\t\tif (questionmarkIndex === -1) {\r\n\t\t\tquestionmarkIndex = url.length;\r\n\t\t}\r\n\t\treturn url.substring(playlistIndex + 9, questionmarkIndex);\r\n\t});\r\n\r\n\tuser.log(\r\n\t\t`We're about to get follower counts from ${idArray.length} playlists.`,\r\n\t\t\"start\"\r\n\t);\r\n\tfor (var i = 0; i < idArray.length; i++) {\r\n\t\tconst playlistId = idArray[i];\r\n\t\tconsole.log(playlistId);\r\n\t\ttry {\r\n\t\t\tlet res;\r\n\t\t\t// Remove old tracks\r\n\t\t\tconst apiURL = `https://api.spotify.com/v1/playlists/${playlistId}`;\r\n\t\t\tres = await axios.get(apiURL, {\r\n\t\t\t\theaders: {\r\n\t\t\t\t\tAuthorization: \"Bearer \" + user.token,\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t},\r\n\t\t\t});\r\n\r\n\t\t\t// If successful, update local\r\n\t\t\tconsole.log(res);\r\n\t\t\tif (res.status === 200) {\r\n\t\t\t\tuser.log(`Got followers from ${idArray[i]}.`);\r\n\t\t\t\tresultsArray.push(res.data.followers.total);\r\n\t\t\t} else {\r\n\t\t\t\tuser.log(\r\n\t\t\t\t\t`Getting followers from ${listArray[i]} gave us an error. Not cool man.`,\r\n\t\t\t\t\t\"error\"\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} catch (err) {\r\n\t\t\tuser.log(\r\n\t\t\t\t`Getting followers from ${listArray[i]} gave us an error. Not cool man.`,\r\n\t\t\t\t\"error\"\r\n\t\t\t);\r\n\t\t\tconsole.log(err);\r\n\t\t}\r\n\t}\r\n\tuser.log(`All done boss.`, \"end\");\r\n\treturn resultsArray.join(\"\\n\");\r\n}\r\n\r\nfunction resetProgress() {\r\n\tuser.progress.done = 0;\r\n\tuser.progress.total = user.selectedPlaylists.length;\r\n\tuser.progress.percent = 0;\r\n}\r\nfunction updateProgress() {\r\n\tuser.progress.done++;\r\n\tuser.progress.percent = (user.progress.done / user.progress.total) * 100;\r\n}\r\n\r\nasync function delay(ms) {\r\n\tawait timeout(ms);\r\n}\r\n\r\nfunction arrayConcat(arr1, arr2) {\r\n\tarr2.forEach(function (item) {\r\n\t\tarr1.push(item);\r\n\t});\r\n\treturn arr1;\r\n}\r\n\r\nconst timeout = (ms) => new Promise((res) => setTimeout(res, ms));\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Card from \"@material-ui/core/Card\";\r\nimport CardActions from \"@material-ui/core/CardActions\";\r\nimport CardContent from \"@material-ui/core/CardContent\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport Modal from \"@material-ui/core/Modal\";\r\nimport { ReactSortable } from \"react-sortablejs\";\r\nimport List from \"@material-ui/core/List\";\r\nimport ListItem from \"@material-ui/core/ListItem\";\r\nimport ListItemText from \"@material-ui/core/ListItemText\";\r\nimport ListItemAvatar from \"@material-ui/core/ListItemAvatar\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport * as api from \"./../api\";\r\n\r\nimport { view } from \"@risingstack/react-easy-state\";\r\nimport { user } from \"./../store\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\twidth: 400,\r\n\t},\r\n\ttitle: {\r\n\t\tfontSize: 14,\r\n\t},\r\n\tpos: {\r\n\t\tmarginBottom: 12,\r\n\t},\r\n\tmodal: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\talignItems: \"center\",\r\n\t},\r\n}));\r\n\r\nconst RearrangeModal = (props) => {\r\n\tconst classes = useStyles();\r\n\tconst [albums, setAlbums] = useState([]);\r\n\r\n\tuseEffect(() => {\r\n\t\tconst albumsInfo = [];\r\n\t\tif (Object.keys(props.playlist).length > 0) {\r\n\t\t\tprops.playlist.albums.map((album, i) => {\r\n\t\t\t\talbumsInfo.push(user.allAlbums[album.id]);\r\n\t\t\t});\r\n\t\t\tsetAlbums(albumsInfo);\r\n\t\t\tconsole.log(albumsInfo);\r\n\t\t}\r\n\t}, [props.playlist]);\r\n\r\n\tconst onSave = async () => {\r\n\t\tconst oldSelection = user.selectedAlbums;\r\n\t\tconst oldPlaylistSelection = user.selectedPlaylists;\r\n\t\tconst newSelection = [];\r\n\t\talbums.forEach((a) => {\r\n\t\t\tnewSelection.push(a.id);\r\n\t\t});\r\n\t\tuser.selectedAlbums = newSelection;\r\n\t\tuser.selectedPlaylists = [props.playlist.id];\r\n\t\tawait api.addAlbums(\"end\", \"replace\");\r\n\t\tuser.selectedAlbums = oldSelection;\r\n\t\tuser.selectedPlaylists = oldPlaylistSelection;\r\n\t\tprops.close();\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tclassName={classes.modal}\r\n\t\t\topen={props.open}\r\n\t\t\tonClose={props.close}\r\n\t\t\taria-labelledby=\"simple-modal-title\"\r\n\t\t\taria-describedby=\"simple-modal-description\">\r\n\t\t\t<Card className={classes.root}>\r\n\t\t\t\t<CardContent>\r\n\t\t\t\t\t<Typography\r\n\t\t\t\t\t\tvariant=\"h2\"\r\n\t\t\t\t\t\tcomponent=\"h2\"\r\n\t\t\t\t\t\tclassName={classes.title}\r\n\t\t\t\t\t\tgutterBottom>\r\n\t\t\t\t\t\t{props.playlist.name}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t\t<List>\r\n\t\t\t\t\t\t<ReactSortable\r\n\t\t\t\t\t\t\tlist={albums}\r\n\t\t\t\t\t\t\tsetList={setAlbums}\r\n\t\t\t\t\t\t\tanimation={200}>\r\n\t\t\t\t\t\t\t{albums &&\r\n\t\t\t\t\t\t\t\talbums.map((album) => (\r\n\t\t\t\t\t\t\t\t\t<ListItem\r\n\t\t\t\t\t\t\t\t\t\tbutton\r\n\t\t\t\t\t\t\t\t\t\tkey={album.id}\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\tpaddingLeft: 0,\r\n\t\t\t\t\t\t\t\t\t\t\tpaddingBottom: 0,\r\n\t\t\t\t\t\t\t\t\t\t\tpaddingTop: 0,\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\t\t\t\t\t\tvariant=\"square\"\r\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={\r\n\t\t\t\t\t\t\t\t\t\t\t\t\talbum.images[1].url\r\n\t\t\t\t\t\t\t\t\t\t\t\t}></Avatar>\r\n\t\t\t\t\t\t\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\t\t\t\t\tprimary={album.name}\r\n\t\t\t\t\t\t\t\t\t\t\tsecondary={\"beans\"}\r\n\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t</ReactSortable>\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</CardContent>\r\n\t\t\t\t<CardActions style={{ float: \"right\" }}>\r\n\t\t\t\t\t<Button onClick={props.close}>Cancel</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tonClick={onSave}>\r\n\t\t\t\t\t\tSave\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</CardActions>\r\n\t\t\t</Card>\r\n\t\t</Modal>\r\n\t);\r\n};\r\n\r\nexport default view(RearrangeModal);\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport ReactDataGrid from \"react-data-grid\";\r\nimport * as api from \"./../api\";\r\n\r\nimport RearrangeAlbums from \"./RearrangeAlbums\";\r\n\r\nimport { view } from \"@risingstack/react-easy-state\";\r\nimport { user } from \"./../store\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tfontSize: 14,\r\n\t},\r\n}));\r\n\r\nconst sortRows = (initialRows, sortColumn, sortDirection) => (rows) => {\r\n\tconst comparer = (a, b) => {\r\n\t\tif (sortDirection === \"ASC\") {\r\n\t\t\treturn a[sortColumn] > b[sortColumn] ? 1 : -1;\r\n\t\t} else if (sortDirection === \"DESC\") {\r\n\t\t\treturn a[sortColumn] < b[sortColumn] ? 1 : -1;\r\n\t\t}\r\n\t};\r\n\treturn sortDirection === \"NONE\" ? initialRows : [...rows].sort(comparer);\r\n};\r\n\r\nconst PlaylistTable = (props) => {\r\n\tconst classes = useStyles();\r\n\r\n\tconst [tableWidth, setTableWidth] = useState(500);\r\n\tconst [sortedAllPlaylists, setSortedAllPlaylists] = useState(\r\n\t\tuser.allPlaylists\r\n\t);\r\n\tconst [rows, setRows] = useState(user.allPlaylists);\r\n\tconst [editAlbumsOpen, setEditAlbumsOpen] = useState(false);\r\n\tconst [\r\n\t\trearrangePlaylistSelection,\r\n\t\tsetRearrangePlaylistSelection,\r\n\t] = useState({});\r\n\r\n\tconst onModalOpen = () => {\r\n\t\tsetEditAlbumsOpen(true);\r\n\t};\r\n\r\n\tconst onModalClose = () => {\r\n\t\tsetEditAlbumsOpen(false);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\t// Get data from storage or API on launch\r\n\t\tconst w = window.innerWidth;\r\n\t\tsetTableWidth(w - 520);\r\n\t\twindow.addEventListener(\"resize\", function () {\r\n\t\t\tconst w = window.innerWidth;\r\n\t\t\tsetTableWidth(w - 520);\r\n\t\t});\r\n\t\tapi.loadTable();\r\n\t}, []);\r\n\r\n\tuseEffect(() => {\r\n\t\tconsole.log(props.search.length);\r\n\t\tif (props.search.length > 2) {\r\n\t\t\tconst newPlaylists = sortedAllPlaylists.filter((playlistInfo) => {\r\n\t\t\t\tconsole.log(playlistInfo.name);\r\n\t\t\t\tconsole.log(\r\n\t\t\t\t\tplaylistInfo.name.indexOf(props.search.toLowerCase())\r\n\t\t\t\t);\r\n\t\t\t\treturn (\r\n\t\t\t\t\tplaylistInfo.name\r\n\t\t\t\t\t\t.toLowerCase()\r\n\t\t\t\t\t\t.indexOf(props.search.toLowerCase()) > -1 ||\r\n\t\t\t\t\tplaylistInfo.albumsString\r\n\t\t\t\t\t\t.toLowerCase()\r\n\t\t\t\t\t\t.indexOf(props.search.toLowerCase()) > -1\r\n\t\t\t\t);\r\n\t\t\t});\r\n\t\t\tconsole.log(newPlaylists);\r\n\t\t\tsetRows(newPlaylists);\r\n\t\t} else {\r\n\t\t\tsetRows(sortedAllPlaylists);\r\n\t\t}\r\n\t}, [props.search, sortedAllPlaylists]);\r\n\r\n\tconst playlistLengthFormatter = ({ value }) => {\r\n\t\t// console.log(value);\r\n\t\tvar ms = parseInt(value);\r\n\t\tvar d, h, m, s;\r\n\t\ts = Math.floor(ms / 1000);\r\n\t\tm = Math.floor(s / 60);\r\n\t\ts = s % 60;\r\n\t\th = Math.floor(m / 60);\r\n\t\tm = m % 60;\r\n\t\td = Math.floor(h / 24);\r\n\t\th = h % 24;\r\n\t\th += d * 24;\r\n\t\treturn `${h < 10 ? \"0\" + h : h}:${m < 10 ? \"0\" + m : m}:${\r\n\t\t\ts < 10 ? \"0\" + s : s\r\n\t\t}`;\r\n\t};\r\n\r\n\tconst lastUpdatedFormatter = ({ value }) => {\r\n\t\tconst now = Date.now().toString();\r\n\t\tconst days = Math.floor((now - value) / 86400000);\r\n\t\tconst word = days === 1 ? \"day\" : \"days\";\r\n\t\treturn `${days} ${word} ago`;\r\n\t};\r\n\r\n\tconst nameFormatter = ({ value }) => {\r\n\t\treturn (\r\n\t\t\t<Tooltip title={value} placement=\"bottom\">\r\n\t\t\t\t<div className=\"no-overflow\">{value}</div>\r\n\t\t\t</Tooltip>\r\n\t\t);\r\n\t};\r\n\r\n\tconst columns = [\r\n\t\t{\r\n\t\t\tkey: \"name\",\r\n\t\t\tname: \"Name\",\r\n\t\t\twidth: 300,\r\n\t\t\tsortable: true,\r\n\t\t\tresizable: true,\r\n\t\t\tformatter: nameFormatter,\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"playlistMilliseconds\",\r\n\t\t\tname: \"Total length\",\r\n\t\t\tformatter: playlistLengthFormatter,\r\n\t\t\twidth: 100,\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"lastUpdated\",\r\n\t\t\tname: \"Last updated\",\r\n\t\t\tformatter: lastUpdatedFormatter,\r\n\t\t\twidth: 120,\r\n\t\t\tsortable: true,\r\n\t\t},\r\n\t\t{\r\n\t\t\tkey: \"albumsString\",\r\n\t\t\tname: \"Albums\",\r\n\t\t\tresizable: true,\r\n\t\t\tformatter: nameFormatter,\r\n\t\t},\r\n\t];\r\n\r\n\tfunction onRowsSelected(rows) {\r\n\t\tfor (var i = 0; i < rows.length; i++) {\r\n\t\t\tlet newSelected = user.selectedPlaylists.slice();\r\n\t\t\tnewSelected.push(rows[i].row.id);\r\n\t\t\tuser.selectedPlaylists = newSelected;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction onRowsDeselected(rows) {\r\n\t\tfor (var i = 0; i < rows.length; i++) {\r\n\t\t\tuser.selectedPlaylists = user.selectedPlaylists.filter(\r\n\t\t\t\t(e) => e !== rows[i].row.id\r\n\t\t\t);\r\n\t\t}\r\n\t}\r\n\r\n\tconst albumActions = function (column, row) {\r\n\t\tconst cellActions = {\r\n\t\t\talbumsString: [\r\n\t\t\t\t{\r\n\t\t\t\t\ticon: <EditIcon />,\r\n\t\t\t\t\tcallback: () => {\r\n\t\t\t\t\t\tconsole.log(row);\r\n\t\t\t\t\t\tsetRearrangePlaylistSelection(row);\r\n\t\t\t\t\t\tsetEditAlbumsOpen(true);\r\n\t\t\t\t\t},\r\n\t\t\t\t},\r\n\t\t\t],\r\n\t\t};\r\n\t\treturn cellActions[column.key];\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<ReactDataGrid\r\n\t\t\t\tcolumns={columns}\r\n\t\t\t\trowGetter={(i) => rows[i]}\r\n\t\t\t\trowsCount={rows.length}\r\n\t\t\t\tminHeight={800}\r\n\t\t\t\tminWidth={tableWidth}\r\n\t\t\t\trowSelection={{\r\n\t\t\t\t\tshowCheckbox: true,\r\n\t\t\t\t\tenableShiftSelect: true,\r\n\t\t\t\t\tonRowsSelected: onRowsSelected,\r\n\t\t\t\t\tonRowsDeselected: onRowsDeselected,\r\n\t\t\t\t\tselectBy: {\r\n\t\t\t\t\t\tkeys: {\r\n\t\t\t\t\t\t\trowKey: \"id\",\r\n\t\t\t\t\t\t\tvalues: user.selectedPlaylists,\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t},\r\n\t\t\t\t}}\r\n\t\t\t\tonGridSort={(sortColumn, sortDirection) => {\r\n\t\t\t\t\tsetSortedAllPlaylists(\r\n\t\t\t\t\t\tsortRows(user.allPlaylists, sortColumn, sortDirection)\r\n\t\t\t\t\t);\r\n\t\t\t\t}}\r\n\t\t\t\tgetCellActions={albumActions}\r\n\t\t\t/>\r\n\t\t\t<RearrangeAlbums\r\n\t\t\t\topen={editAlbumsOpen}\r\n\t\t\t\tclose={onModalClose}\r\n\t\t\t\tplaylist={rearrangePlaylistSelection}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default view(PlaylistTable);\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport Dialog from \"@material-ui/core/Dialog\";\r\nimport DialogContent from \"@material-ui/core/DialogContent\";\r\nimport DialogTitle from \"@material-ui/core/DialogTitle\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport { user } from \"./../store\";\r\nconst useStyles = makeStyles((theme) => ({\r\n\titem: {\r\n\t\tmargin: 0,\r\n\t\tmarginRight: 2,\r\n\t\tmarginBottom: 2,\r\n\t},\r\n}));\r\n\r\nconst AlertDialog = (props) => {\r\n\tconst classes = useStyles();\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Dialog\r\n\t\t\t\topen={props.open}\r\n\t\t\t\tonClose={props.onClose}\r\n\t\t\t\taria-labelledby=\"alert-dialog-title\"\r\n\t\t\t\taria-describedby=\"alert-dialog-description\">\r\n\t\t\t\t<DialogTitle id=\"alert-dialog-title\">\r\n\t\t\t\t\tPlease do the following in order:\r\n\t\t\t\t</DialogTitle>\r\n\t\t\t\t<DialogContent>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\t1. Spotify probably needs to re-authenticate.\r\n\t\t\t\t\t\t</Typography>\r\n\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tclassName={classes.item}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tlocalStorage.setItem(\"token\", \"\");\r\n\t\t\t\t\t\t\t\tuser.log(\r\n\t\t\t\t\t\t\t\t\t\"Spotify token has been cleared. Please hit Ctrl+F5 to hard refresh your webpage.\",\r\n\t\t\t\t\t\t\t\t\t\"end\"\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tsize=\"small\">\r\n\t\t\t\t\t\t\tClick here\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\tthen refresh your webpage\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\t2. If the above button not work, let's reset all\r\n\t\t\t\t\t\t\tyour data.\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tclassName={classes.item}\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tlocalStorage.clear();\r\n\t\t\t\t\t\t\t\tuser.allPlaylists = [];\r\n\t\t\t\t\t\t\t\tuser.log(\r\n\t\t\t\t\t\t\t\t\t\"All playlist data has been cleared. Please hit Ctrl+F5 to hard refresh your webpage.\",\r\n\t\t\t\t\t\t\t\t\t\"end\"\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tsize=\"small\">\r\n\t\t\t\t\t\t\tClick here\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\tthen refresh your webpage\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\t3. If those didn't work, contact Brandon.\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\t\tclassName={classes.item}\r\n\t\t\t\t\t\t\thref={\"mailto:cathcart.brandon@gmail.com\"}\r\n\t\t\t\t\t\t\tsize=\"small\">\r\n\t\t\t\t\t\t\tClick here\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t<Typography variant=\"body1\">\r\n\t\t\t\t\t\t\tbut don't refresh your webpage\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</DialogContent>\r\n\t\t\t</Dialog>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default AlertDialog;\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport * as api from \"./../api\";\r\nimport LinearProgress from \"@material-ui/core/LinearProgress\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport HelpDialog from \"./HelpDialog\";\r\n\r\nimport { view } from \"@risingstack/react-easy-state\";\r\nimport { user } from \"./../store\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\tbg: {\r\n\t\tbackground: theme.palette.background.paper,\r\n\t},\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tflexWrap: \"wrap\",\r\n\t\tjustifyContent: \"flex-start\",\r\n\t},\r\n\titem: {\r\n\t\tmargin: 0,\r\n\t\tmarginRight: 2,\r\n\t\tmarginBottom: 2,\r\n\t},\r\n\tprogressBox: {\r\n\t\twidth: \"100%\",\r\n\t\tdisplay: \"flex\",\r\n\t\talignItems: \"center\",\r\n\t},\r\n\tprogress: {\r\n\t\tflexGrow: \"1\",\r\n\t},\r\n}));\r\n\r\nconst ActionButtons = (props) => {\r\n\tconst classes = useStyles();\r\n\tconst [desc, setDesc] = useState(\"\");\r\n\tconst [helpOpen, setHelpOpen] = useState(false);\r\n\r\n\tfunction descChange(e) {\r\n\t\tsetDesc(e.target.value);\r\n\t}\r\n\r\n\tconst handleDialogClose = () => {\r\n\t\tsetHelpOpen(false);\r\n\t\tconsole.log(helpOpen);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t<div className={classes.progressBox}>\r\n\t\t\t\t\t{/* <Typography variant=\"body1\">Current Task</Typography> */}\r\n\t\t\t\t\t<LinearProgress\r\n\t\t\t\t\t\tvariant=\"determinate\"\r\n\t\t\t\t\t\tvalue={user.progress.percent}\r\n\t\t\t\t\t\tcolor=\"secondary\"\r\n\t\t\t\t\t\tclassName={classes.progress}\r\n\t\t\t\t\t\tstyle={{ display: \"none\" }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tvariant=\"body1\"\r\n\t\t\t\t\tstyle={{ flexBasis: \"100%\", paddingTop: 5 }}>\r\n\t\t\t\t\tAdd Albums to\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tclassName={classes.item}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tapi.addAlbums(\"start\");\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tsize=\"small\">\r\n\t\t\t\t\tstart\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tclassName={classes.item}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tapi.addAlbums(\"end\");\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tsize=\"small\">\r\n\t\t\t\t\tend\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tclassName={classes.item}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tapi.addAlbums(\"start\", \"replace\");\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tsize=\"small\">\r\n\t\t\t\t\tReplace\r\n\t\t\t\t</Button>\r\n\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tvariant=\"body1\"\r\n\t\t\t\t\tstyle={{ flexBasis: \"100%\", paddingTop: 5 }}>\r\n\t\t\t\t\tPlaylist Actions\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<div style={{ textAlign: \"left\" }}>\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tid=\"new-description\"\r\n\t\t\t\t\t\tplaceholder=\"Description\"\r\n\t\t\t\t\t\tonChange={descChange}\r\n\t\t\t\t\t\tstyle={{ width: \"120px\", padding: 5 }}\r\n\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tclassName={classes.item}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tapi.replaceDescription(desc);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tsize=\"small\">\r\n\t\t\t\t\t\tReplace\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\t\tclassName={classes.item}\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tapi.refreshPlaylists();\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tsize=\"small\">\r\n\t\t\t\t\t\trefresh albums\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t\t{/* <Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tclassName={classes.item}>\r\n\t\t\t\t\tAdd to start and push last album\r\n\t\t\t\t</Button> */}\r\n\r\n\t\t\t\t<Typography\r\n\t\t\t\t\tvariant=\"body1\"\r\n\t\t\t\t\tstyle={{ flexBasis: \"100%\", paddingTop: 5 }}>\r\n\t\t\t\t\tUtility\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tclassName={classes.item}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tlocalStorage.setItem(\"token\", \"\");\r\n\t\t\t\t\t\tuser.log(\r\n\t\t\t\t\t\t\t\"Spotify token has been cleared. Please refresh your webpage.\",\r\n\t\t\t\t\t\t\t\"end\"\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tsize=\"small\">\r\n\t\t\t\t\tSpotify access token\r\n\t\t\t\t</Button>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tclassName={classes.item}\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetHelpOpen(true);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tsize=\"small\">\r\n\t\t\t\t\tI'm getting an error!\r\n\t\t\t\t</Button>\r\n\t\t\t\t<HelpDialog open={helpOpen} onClose={handleDialogClose} />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default view(ActionButtons);\r\n","import React from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Chip from \"@material-ui/core/Chip\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\n\r\nimport { view } from \"@risingstack/react-easy-state\";\r\nimport { user } from \"./../store\";\r\nimport Avatar from \"@material-ui/core/Avatar\";\r\nimport Tooltip from \"@material-ui/core/Tooltip\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tdisplay: \"flex\",\r\n\t\tjustifyContent: \"center\",\r\n\t\tflexWrap: \"wrap\",\r\n\t\tlistStyle: \"none\",\r\n\t\tpadding: theme.spacing(0.5),\r\n\t\tmargin: 0,\r\n\t},\r\n\tchip: {\r\n\t\tmargin: theme.spacing(0.5),\r\n\t},\r\n}));\r\n\r\nconst AlbumChips = () => {\r\n\tconst classes = useStyles();\r\n\tconst handleDelete = (chipToDelete) => () => {\r\n\t\tuser.selectedAlbums = user.selectedAlbums.filter(\r\n\t\t\t(chip) => chip !== chipToDelete\r\n\t\t);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<Paper component=\"ul\" className={classes.root}>\r\n\t\t\t{user.selectedAlbums.map((albumID, index) => {\r\n\t\t\t\treturn (\r\n\t\t\t\t\t<li key={index}>\r\n\t\t\t\t\t\t<Tooltip\r\n\t\t\t\t\t\t\ttitle={user.allAlbums[albumID].name}\r\n\t\t\t\t\t\t\tplacement=\"top\">\r\n\t\t\t\t\t\t\t<Chip\r\n\t\t\t\t\t\t\t\t// label={user.allAlbums[albumID].name}\r\n\t\t\t\t\t\t\t\tonClick={handleDelete(albumID)}\r\n\t\t\t\t\t\t\t\tclassName={classes.chip}\r\n\t\t\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\t\t\tavatar={\r\n\t\t\t\t\t\t\t\t\t<Avatar\r\n\t\t\t\t\t\t\t\t\t\tsrc={\r\n\t\t\t\t\t\t\t\t\t\t\tuser.allAlbums[albumID].images[1]\r\n\t\t\t\t\t\t\t\t\t\t\t\t.url\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t</li>\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t</Paper>\r\n\t);\r\n};\r\n\r\nexport default view(AlbumChips);\r\n","import React, { useEffect } from \"react\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport { view } from \"@risingstack/react-easy-state\";\r\nimport { user } from \"./../store\";\r\n\r\nconst Logger = (props) => {\r\n\tuseEffect(() => {\r\n\t\tuser.logArray = [];\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\tstyle={{\r\n\t\t\t\tposition: \"absolute\",\r\n\t\t\t\tright: 5,\r\n\t\t\t\ttop: 3,\r\n\t\t\t\tdisplay: \"flex\",\r\n\t\t\t\talignItems: \"flex-start\",\r\n\t\t\t\tjustifyContent: \"flex-end\",\r\n\t\t\t\twidth: \"100%\",\r\n\t\t\t\theight: \"calc(100vh - 60px)\",\r\n\t\t\t\tbackground: \"rgba(0,0,0,0.6)\",\r\n\t\t\t\tzIndex: 1000,\r\n\t\t\t\ttransition: \"0.5s\",\r\n\t\t\t\tborderRadius: 10,\r\n\t\t\t\toverflowY: \"scroll\",\r\n\t\t\t}}\r\n\t\t\tclassName=\"logger\"\r\n\t\t\tid=\"logger\">\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tcolor: \"#ddd\",\r\n\t\t\t\t\tflexGrow: 1,\r\n\t\t\t\t\tpaddingTop: 15,\r\n\t\t\t\t\ttextAlign: \"left\",\r\n\t\t\t\t\tpaddingLeft: 12,\r\n\t\t\t\t}}>\r\n\t\t\t\t{user.logArray.map((logline, index) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\tcomponent=\"p\"\r\n\t\t\t\t\t\t\tvariant=\"body2\"\r\n\t\t\t\t\t\t\tid=\"last-log\"\r\n\t\t\t\t\t\t\tstyle={{ display: \"block\", color: logline.color }}\r\n\t\t\t\t\t\t\tkey={index}>\r\n\t\t\t\t\t\t\t{logline.text}\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t);\r\n\t\t\t\t})}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default view(Logger);\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\n\r\nimport AlbumList from \"./AlbumList\";\r\nimport PlaylistTable from \"./PlaylistTable\";\r\nimport ActionButtons from \"./ActionButtons\";\r\nimport AlbumChips from \"./AlbumChips\";\r\n\r\nimport Logger from \"./Logger\";\r\nimport { user } from \"./../store\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t},\r\n\tpaper: {\r\n\t\tpadding: theme.spacing(2),\r\n\t\ttextAlign: \"left\",\r\n\t\tcolor: theme.palette.text.secondary,\r\n\t\theight: \"calc(100vh - 60px)\",\r\n\t\tbackgroundColor: \"rgba(240,240,240,0.7)\",\r\n\t},\r\n}));\r\n\r\nconst PlaylistAlbumsPage = (props) => {\r\n\tconst { token } = props;\r\n\tconst classes = useStyles();\r\n\tconst sidebarWidth = 250;\r\n\tconst [search, setSearch] = useState(\"\");\r\n\r\n\tconst handleSearchChange = (event) => {\r\n\t\tsetSearch(event.target.value);\r\n\t};\r\n\r\n\tuseEffect(() => {\r\n\t\tuser.selectedPlaylists = [];\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tposition: \"fixed\",\r\n\t\t\t\t\twidth: sidebarWidth,\r\n\t\t\t\t\ttop: 55,\r\n\t\t\t\t\tleft: 5,\r\n\t\t\t\t}}>\r\n\t\t\t\t<Paper className={classes.paper} style={{ padding: 10 }}>\r\n\t\t\t\t\t<AlbumList token={token} />\r\n\t\t\t\t\t<AlbumChips />\r\n\t\t\t\t\t<ActionButtons token={token} />\r\n\t\t\t\t</Paper>\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tposition: \"absolute\",\r\n\t\t\t\t\tmarginRight: 10,\r\n\t\t\t\t\tleft: sidebarWidth + 10,\r\n\t\t\t\t\ttop: 55,\r\n\t\t\t\t}}>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tid=\"outlined-basic\"\r\n\t\t\t\t\tlabel=\"Search\"\r\n\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tfloat: \"right\",\r\n\t\t\t\t\t\tbackground: \"rgba(250,250,250,0.7)\",\r\n\t\t\t\t\t\tmarginBottom: 10,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonChange={handleSearchChange}\r\n\t\t\t\t\tvalue={search}\r\n\t\t\t\t/>\r\n\t\t\t\t<PlaylistTable token={token} search={search} />\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tposition: \"fixed\",\r\n\t\t\t\t\theight: \"100vh\",\r\n\t\t\t\t\twidth: sidebarWidth,\r\n\t\t\t\t\ttop: 50,\r\n\t\t\t\t\tright: 0,\r\n\t\t\t\t}}>\r\n\t\t\t\t<Logger />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default PlaylistAlbumsPage;\r\n","import React, { useState } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Paper from \"@material-ui/core/Paper\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport * as api from \"./../api\";\r\nimport Logger from \"./Logger\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t},\r\n\tpaper: {\r\n\t\tpadding: theme.spacing(2),\r\n\t\ttextAlign: \"left\",\r\n\t\tcolor: theme.palette.text.secondary,\r\n\t\theight: \"calc(100vh - 60px)\",\r\n\t\tbackgroundColor: \"rgba(240,240,240,0.7)\",\r\n\t},\r\n}));\r\n\r\nconst UtilitiesAlbumPage = (props) => {\r\n\tconst { token } = props;\r\n\tconst classes = useStyles();\r\n\tconst sidebarWidth = 250;\r\n\r\n\tconst [followList, setFollowList] = React.useState(\"\");\r\n\tconst [statsToGetList, setStatsToGetList] = React.useState(\"\");\r\n\tconst [resultsListString, setResultsListString] = React.useState(\"\");\r\n\r\n\tconst handleFollowListChange = (event) => {\r\n\t\tsetFollowList(event.target.value);\r\n\t};\r\n\tconst handleFollowStatsChange = (event) => {\r\n\t\tsetStatsToGetList(event.target.value);\r\n\t};\r\n\r\n\tasync function getFollowers() {\r\n\t\tconsole.log(\"starting\");\r\n\t\tconst results = await api.getFollowerCounts(statsToGetList);\r\n\t\tconsole.log(results);\r\n\t\tsetResultsListString(results);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className={classes.root}>\r\n\t\t\t<div style={{ width: \"30%\", display: \"inline-block\" }}>\r\n\t\t\t\t<form noValidate autoComplete=\"off\">\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Paper style={{ width: \"10%\", minWidth: 200 }}>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tid=\"outlined-multiline-static\"\r\n\t\t\t\t\t\t\t\tlabel=\"Playlists to Follow\"\r\n\t\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\t\trows={20}\r\n\t\t\t\t\t\t\t\tdefaultValue=\"\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tonChange={handleFollowListChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tstyle={{ display: \"block\", marginTop: 10 }}\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tapi.followPlaylists(followList);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tsize=\"small\">\r\n\t\t\t\t\tFollow playlists\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t\t<div style={{ width: \"50%\", display: \"inline-block\" }}>\r\n\t\t\t\t<form\r\n\t\t\t\t\tnoValidate\r\n\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\tstyle={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Paper style={{ width: \"10%\", minWidth: 200 }}>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tid=\"outlined-multiline-static\"\r\n\t\t\t\t\t\t\t\tlabel=\"Get follow stats\"\r\n\t\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\t\trows={20}\r\n\t\t\t\t\t\t\t\tdefaultValue=\"\"\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tonChange={handleFollowStatsChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t\t<form\r\n\t\t\t\t\tnoValidate\r\n\t\t\t\t\tautoComplete=\"off\"\r\n\t\t\t\t\tstyle={{ display: \"inline-block\" }}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<Paper style={{ width: \"10%\", minWidth: 200 }}>\r\n\t\t\t\t\t\t\t<TextField\r\n\t\t\t\t\t\t\t\tid=\"follower-results\"\r\n\t\t\t\t\t\t\t\tlabel=\"Results appear here\"\r\n\t\t\t\t\t\t\t\tmultiline\r\n\t\t\t\t\t\t\t\trows={20}\r\n\t\t\t\t\t\t\t\tvariant=\"outlined\"\r\n\t\t\t\t\t\t\t\tvalue={resultsListString}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</Paper>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tstyle={{ display: \"block\", marginTop: 10 }}\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tgetFollowers();\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tsize=\"small\">\r\n\t\t\t\t\tGet follow counts\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t\t<div\r\n\t\t\t\tstyle={{\r\n\t\t\t\t\tposition: \"fixed\",\r\n\t\t\t\t\theight: \"100vh\",\r\n\t\t\t\t\twidth: sidebarWidth,\r\n\t\t\t\t\ttop: 50,\r\n\t\t\t\t\tright: 0,\r\n\t\t\t\t}}>\r\n\t\t\t\t<Logger />\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default UtilitiesAlbumPage;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Tabs from \"@material-ui/core/Tabs\";\r\nimport Tab from \"@material-ui/core/Tab\";\r\nimport Box from \"@material-ui/core/Box\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport useAxios from \"axios-hooks\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\n\r\nimport { view } from \"@risingstack/react-easy-state\";\r\nimport { user } from \"./../store\";\r\n\r\nimport PlaylistAlbumsPage from \"./PlaylistAlbumsPage\";\r\nimport UtilitiesPage from \"./UtilitiesPage\";\r\n\r\nfunction TabPanel(props) {\r\n\tconst { children, value, index, ...other } = props;\r\n\r\n\treturn (\r\n\t\t<div\r\n\t\t\trole=\"tabpanel\"\r\n\t\t\thidden={value !== index}\r\n\t\t\tid={`simple-tabpanel-${index}`}\r\n\t\t\taria-labelledby={`simple-tab-${index}`}\r\n\t\t\t{...other}>\r\n\t\t\t{value === index && <Box p={3}>{children}</Box>}\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nfunction a11yProps(index) {\r\n\treturn {\r\n\t\tid: `simple-tab-${index}`,\r\n\t\t\"aria-controls\": `simple-tabpanel-${index}`,\r\n\t};\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n\troot: {\r\n\t\tflexGrow: 1,\r\n\t\theight: \"calc(100vh - 48px)\",\r\n\t\t// backgroundColor: theme.palette.background.paper,\r\n\t},\r\n}));\r\n\r\nconst Main = (props) => {\r\n\tconst classes = useStyles();\r\n\tconst { token } = props;\r\n\tconst [value, setValue] = useState(0);\r\n\tconst [tokenTimeout, setTokenTimout] = useState(user.tokenms - Date.now());\r\n\r\n\tuseEffect(() => {\r\n\t\tconst tokenTimeoutInterval = setInterval(() => {\r\n\t\t\tsetTokenTimout(user.tokenms - Date.now());\r\n\t\t\tif (tokenTimeout < 1000) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\ttokenTimeoutInterval.clear();\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tconsole.log(\"Tried to clear interval, could not. Oh well.\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}, 60000);\r\n\t}, []);\r\n\r\n\tconst [{ data, loading, error }] = useAxios({\r\n\t\turl: \"https://api.spotify.com/v1/me\",\r\n\t\tmethod: \"GET\",\r\n\t\theaders: {\r\n\t\t\tAuthorization: \"Bearer \" + token,\r\n\t\t},\r\n\t});\r\n\r\n\tif (loading) {\r\n\t\tconsole.log(\"Loading user...\");\r\n\t}\r\n\r\n\tif (data) {\r\n\t\t// console.log(data);\r\n\t\tuser.name = data.display_name;\r\n\t\tuser.id = data.id;\r\n\t}\r\n\r\n\tconst handleChange = (event, newValue) => {\r\n\t\tsetValue(newValue);\r\n\t};\r\n\r\n\tif (user.id !== \"\") {\r\n\t\treturn (\r\n\t\t\t<div className={classes.root}>\r\n\t\t\t\t{/* <div style={{ display: 'flex' }}> */}\r\n\t\t\t\t<AppBar position=\"static\" style={{ width: \"100%\" }}>\r\n\t\t\t\t\t<Tabs\r\n\t\t\t\t\t\tvalue={value}\r\n\t\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t\t\taria-label=\"simple tabs example\"\r\n\t\t\t\t\t\tstyle={{ width: \"75%\" }}>\r\n\t\t\t\t\t\t<Tab label=\"Playlist Tools\" {...a11yProps(0)} />\r\n\t\t\t\t\t\t<Tab label=\"Utilities\" {...a11yProps(1)} />\r\n\t\t\t\t\t</Tabs>\r\n\t\t\t\t\t<div style={{ position: \"absolute\", top: 10, right: 10 }}>\r\n\t\t\t\t\t\t<Typography variant=\"h5\">\r\n\t\t\t\t\t\t\tSpotify access expires in:{\" \"}\r\n\t\t\t\t\t\t\t{Math.ceil(tokenTimeout / 1000 / 60)} mins\r\n\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</AppBar>\r\n\t\t\t\t{/* </div> */}\r\n\t\t\t\t<TabPanel value={value} index={0} style={{ height: \"100%\" }}>\r\n\t\t\t\t\t<PlaylistAlbumsPage token={token} />\r\n\t\t\t\t</TabPanel>\r\n\t\t\t\t<TabPanel value={value} index={1}>\r\n\t\t\t\t\t<UtilitiesPage token={token} />\r\n\t\t\t\t</TabPanel>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\tif (error) {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tIf you're seeing this, click this button, then refresh the\r\n\t\t\t\t\tpage.\r\n\t\t\t\t</p>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tvariant=\"contained\"\r\n\t\t\t\t\tcolor=\"primary\"\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tlocalStorage.setItem(\"token\", \"\");\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\tClear Token\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<p>Loading...</p>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default view(Main);\r\n","import React, { Component } from \"react\";\r\nimport { authEndpoint, clientId, redirectUri, scopes } from \"./config\";\r\nimport { createMuiTheme, ThemeProvider } from \"@material-ui/core/styles\";\r\nimport Typography from \"@material-ui/core/Typography\";\r\nimport hash from \"./hash\";\r\nimport Main from \"./components/Main\";\r\nimport logo from \"./logo.svg\";\r\nimport \"./App.css\";\r\nimport { user } from \"./store\";\r\n\r\nconst LSTheme = createMuiTheme({\r\n\tpalette: {\r\n\t\tprimary: {\r\n\t\t\tmain: \"#0a5e54\",\r\n\t\t},\r\n\t\tsecondary: {\r\n\t\t\tmain: \"#ede8e5\",\r\n\t\t},\r\n\t},\r\n});\r\n\r\nclass App extends Component {\r\n\tconstructor() {\r\n\t\tsuper();\r\n\t\tthis.state = {\r\n\t\t\ttoken: null,\r\n\t\t\titem: {\r\n\t\t\t\talbum: {\r\n\t\t\t\t\timages: [{ url: \"\" }],\r\n\t\t\t\t},\r\n\t\t\t\tname: \"\",\r\n\t\t\t\tartists: [{ name: \"\" }],\r\n\t\t\t\tduration_ms: 0,\r\n\t\t\t},\r\n\t\t\tis_playing: \"Paused\",\r\n\t\t\tprogress_ms: 0,\r\n\t\t};\r\n\t}\r\n\tcomponentDidMount() {\r\n\t\t// Set token\r\n\t\tlet _token = hash.access_token || localStorage.getItem(\"token\");\r\n\r\n\t\tif (hash.access_token) {\r\n\t\t\t// Set to 30 minutes later than now\r\n\t\t\tuser.tokenms = Date.now() + 30 * 60 * 1000;\r\n\t\t}\r\n\r\n\t\tif (_token) {\r\n\t\t\t// Set token\r\n\t\t\tthis.setState({\r\n\t\t\t\ttoken: _token,\r\n\t\t\t});\r\n\t\t\tlocalStorage.setItem(\"token\", _token);\r\n\t\t\tuser.token = _token;\r\n\t\t}\r\n\t}\r\n\r\n\tclearLocalStorage() {\r\n\t\tlocalStorage.setItem(\"token\", \"\");\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<ThemeProvider theme={LSTheme}>\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<div className=\"App\">\r\n\t\t\t\t\t\t<div className=\"bg\">\r\n\t\t\t\t\t\t\t{!this.state.token && (\r\n\t\t\t\t\t\t\t\t<div className=\"App-header\">\r\n\t\t\t\t\t\t\t\t\t<Typography\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"h1\"\r\n\t\t\t\t\t\t\t\t\t\tcomponent=\"h1\"\r\n\t\t\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\t\t\ttextShadow:\r\n\t\t\t\t\t\t\t\t\t\t\t\t\"0px 5px 10px rgba(0,0,0,0.9)\",\r\n\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\tLittle Conductor\r\n\t\t\t\t\t\t\t\t\t</Typography>\r\n\t\t\t\t\t\t\t\t\t<a\r\n\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn--loginApp-link\"\r\n\t\t\t\t\t\t\t\t\t\thref={`${authEndpoint}?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${scopes.join(\r\n\t\t\t\t\t\t\t\t\t\t\t\"%20\"\r\n\t\t\t\t\t\t\t\t\t\t)}&response_type=token&show_dialog=true`}>\r\n\t\t\t\t\t\t\t\t\t\tLogin to Spotify\r\n\t\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{this.state.token && <Main token={this.state.token} />}\r\n\t\t\t\t</header>\r\n\t\t\t</ThemeProvider>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}