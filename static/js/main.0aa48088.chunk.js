(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{355:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},361:function(e,t,a){e.exports=a(482)},366:function(e,t,a){},481:function(e,t,a){},482:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(16),o=a.n(c),i=(a(366),a(212)),l=a(213),s=a(237),u=a(238),m=a(34),f=["user-read-email","playlist-modify-public","playlist-modify-private"],d=window.location.hash.substring(1).split("&").reduce(function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e},{});window.location.hash="";var p=d,b=a(85),g=a(357),h=a(292),y=a(328),v=a(333),O=a(321),j=a(251),k=a(315),E=a(235),w=a(71),x=a(358),P=a(49),C=localStorage.getItem("user")?Object(w.a)(JSON.parse(localStorage.getItem("user"))):Object(w.a)({name:"",id:"",token:"",allPlaylists:{},album:{},selectedPlaylists:[],progress:{done:0,total:0,percent:0},errors:[]});function R(){var e=[];for(var t in C.allPlaylists){var a=Object(x.a)({},C.allPlaylists[t]);e.push(a)}return console.log(e),e}Object(P.c)(function(){localStorage.setItem("user",JSON.stringify(C))}),window.user=C;var S=a(193),N=a(322),A=a(255),L=a(257),I=a(295),T=a(294),B=a(334),_=Object(h.a)(function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},list:{position:"relative",overflow:"auto",maxHeight:"65vh"}}}),z=Object(w.b)(function(e){var t=_(),a=e.token,c=Object(n.useState)(0),o=Object(b.a)(c,2),i=o[0],l=o[1],s=Object(E.a)({url:"https://api.spotify.com/v1/artists/4SCWiQbJCMTHK737aNUqBJ/albums?offset=0&limit=20&market=CA",method:"GET",headers:{Authorization:"Bearer "+a}}),u=Object(b.a)(s,1)[0],m=u.data,f=u.loading,d=u.error;return f?r.a.createElement("p",null,"Loading..."):d?r.a.createElement("p",null,"Error!"):r.a.createElement("div",{className:t.root},r.a.createElement(A.a,{className:t.list,component:"nav","aria-label":"main mailbox folders"},m.items.map(function(e,t){return r.a.createElement(L.a,{button:!0,selected:i===t,onClick:function(e){return l(a=t),void(C.album=m.items[a]);var a},key:e.id},r.a.createElement(T.a,null,r.a.createElement(B.a,{variant:"square"},r.a.createElement("img",{src:e.images[1].url,alt:"cover"}))),r.a.createElement(I.a,{primary:e.name}))})))}),G=a(42),J=a.n(G),D=a(105),H=a(336),W=a.n(H),q=a(86),F=a.n(q),M=a(342),U=a.n(M),K=a(352),Q=a.n(K),V=a(343),X=a.n(V),Y=a(350),Z=a.n(Y),$=a(282),ee=a.n($),te=a(281),ae=a.n(te),ne=a(344),re=a.n(ne),ce=a(345),oe=a.n(ce),ie=a(347),le=a.n(ie),se=a(348),ue=a.n(se),me=a(349),fe=a.n(me),de=a(353),pe=a.n(de),be=a(346),ge=a.n(be),he=a(351),ye=a.n(he),ve=a(354),Oe=a.n(ve),je={Add:Object(n.forwardRef)(function(e,t){return r.a.createElement(U.a,Object.assign({},e,{ref:t}))}),Check:Object(n.forwardRef)(function(e,t){return r.a.createElement(X.a,Object.assign({},e,{ref:t}))}),Clear:Object(n.forwardRef)(function(e,t){return r.a.createElement(ae.a,Object.assign({},e,{ref:t}))}),Delete:Object(n.forwardRef)(function(e,t){return r.a.createElement(re.a,Object.assign({},e,{ref:t}))}),DetailPanel:Object(n.forwardRef)(function(e,t){return r.a.createElement(ee.a,Object.assign({},e,{ref:t}))}),Edit:Object(n.forwardRef)(function(e,t){return r.a.createElement(oe.a,Object.assign({},e,{ref:t}))}),Export:Object(n.forwardRef)(function(e,t){return r.a.createElement(ge.a,Object.assign({},e,{ref:t}))}),Filter:Object(n.forwardRef)(function(e,t){return r.a.createElement(le.a,Object.assign({},e,{ref:t}))}),FirstPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(ue.a,Object.assign({},e,{ref:t}))}),LastPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(fe.a,Object.assign({},e,{ref:t}))}),NextPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(ee.a,Object.assign({},e,{ref:t}))}),PreviousPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(Z.a,Object.assign({},e,{ref:t}))}),ResetSearch:Object(n.forwardRef)(function(e,t){return r.a.createElement(ae.a,Object.assign({},e,{ref:t}))}),Search:Object(n.forwardRef)(function(e,t){return r.a.createElement(ye.a,Object.assign({},e,{ref:t}))}),SortArrow:Object(n.forwardRef)(function(e,t){return r.a.createElement(Q.a,Object.assign({},e,{ref:t}))}),ThirdStateCheck:Object(n.forwardRef)(function(e,t){return r.a.createElement(pe.a,Object.assign({},e,{ref:t}))}),ViewColumn:Object(n.forwardRef)(function(e,t){return r.a.createElement(Oe.a,Object.assign({},e,{ref:t}))})},ke=Object(w.b)(function(e){var t=e.token;function a(e,t){return c.apply(this,arguments)}function c(){return(c=Object(D.a)(J.a.mark(function e(a,n){var r,c,o,i,l,s,u,m;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:c=[],o={},i={},l="";case 4:return e.next=6,F.a.get(r||"https://api.spotify.com/v1/playlists/".concat(a,"/tracks?fields="),{headers:{Authorization:"Bearer "+t}});case 6:s=e.sent,console.log(s),c=c.concat(s.data.items),r=s.data.next;case 10:if(r){e.next=4;break}case 11:for(u in c)m=c[u].track,o[u]={place:u,id:m.id,album:m.album.name},i.hasOwnProperty(m.album.name)?i[m.album.name].trackCount+=1:(i[m.album.name]={name:m.album.name,trackCount:0},l+=", "+m.album.name);return l=l.substring(2),e.abrupt("return",[o,i,l]);case 14:case"end":return e.stop()}},e)}))).apply(this,arguments)}function o(e){return i.apply(this,arguments)}function i(){return(i=Object(D.a)(J.a.mark(function e(t){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object(n.useEffect)(function(){function e(){return(e=Object(D.a)(J.a.mark(function e(){var t,n,r,c,i,l,s,u,m,f,d,p,g;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.a.get(t||"https://api.spotify.com/v1/me/playlists?limit=50",{headers:{Authorization:"Bearer "+C.token}});case 2:for(c in n=e.sent,console.log(n),r=n.data.items)(i=r[c]).owner.id===C.id&&(C.allPlaylists.hasOwnProperty(i.id)||(C.allPlaylists[i.id]={id:i.id,name:i.name,url:i.external_urls.spotify,tracks_endpoint:i.tracks.href,tracks:{},albumList:"Loading...",albums:{}}));t=n.data.next;case 7:if(t){e.next=0;break}case 8:l=-300,e.t0=J.a.keys(C.allPlaylists);case 11:if((e.t1=e.t0()).done){e.next=29;break}if(s=e.t1.value,"Loading..."!==(u=C.allPlaylists[s]).albumList){e.next=27;break}return e.next=17,o(l);case 17:return e.next=19,a(u.id);case 19:m=e.sent,f=Object(b.a)(m,3),d=f[0],p=f[1],g=f[2],C.allPlaylists[s].tracks=d,C.allPlaylists[s].albums=p,C.allPlaylists[s].albumList=g;case 27:e.next=11;break;case 29:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]);var l=function(e){return new Promise(function(t){return setTimeout(t,e)})};return r.a.createElement("div",{style:{maxWidth:"100%"}},r.a.createElement(W.a,{columns:[{title:"Name",field:"name"},{title:"Albums",field:"albumList"}],data:R(),icons:je,options:{showTitle:!1,selection:!0,pageSize:20,maxBodyHeight:"52vh",draggable:!1},onSelectionChange:function(e){return C.selectedPlaylists=e}}))}),Ee=300;function we(e){return xe.apply(this,arguments)}function xe(){return(xe=Object(D.a)(J.a.mark(function e(t){var a,n,r,c,o,i,l,s,u,m,f;return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Go time!"),C.progress.done=0,C.progress.total=C.selectedPlaylists.length,C.progress.percent=0,a=0,e.next=7,F.a.get("https://api.spotify.com/v1/albums/".concat(C.album.id,"/tracks"),{headers:{Authorization:"Bearer "+C.token}});case 7:for(n=e.sent,r=n.data,c=[],o=0;o<r.total;o++)c.push(r.items[o].uri);i=0;case 12:if(!(i<C.selectedPlaylists.length)){e.next=37;break}if(l=C.selectedPlaylists[i],console.log(l.albumList,C.album.name,l.albumList.indexOf(C.album.name)),-1!==l.albumList.indexOf(C.album.name)){e.next=29;break}return s="start"===t?{uris:c,position:0}:{uris:c},e.prev=17,e.next=20,F.a.post("https://api.spotify.com/v1/playlists/".concat(l.id,"/tracks"),s,{headers:{Authorization:"Bearer "+C.token,"Content-Type":"application/json"}});case 20:for(e.sent,u="start"===t?0:C.allPlaylists[l.id].tracks.length,C.allPlaylists[l.id].albumList="start"===t?"".concat(C.album.name,", ")+C.allPlaylists[l.id].albumList:C.allPlaylists[l.id].albumList+=", ".concat(C.album.name),m=0;m<r.total;m++)f=u+m,C.allPlaylists[l.id].tracks[f]={place:f,id:r.items[m].id,album:r.name};e.next=29;break;case 26:e.prev=26,e.t0=e.catch(17),console.log(e.t0);case 29:return C.progress.done++,C.progress.percent=C.progress.done/C.progress.total*100,a+=Ee,e.next=34,Pe(a);case 34:i++,e.next=12;break;case 37:case"end":return e.stop()}},e,null,[[17,26]])}))).apply(this,arguments)}function Pe(e){return Ce.apply(this,arguments)}function Ce(){return(Ce=Object(D.a)(J.a.mark(function e(t){return J.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re(t);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var Re=function(e){return new Promise(function(t){return setTimeout(t,e)})},Se=a(329),Ne=a(120),Ae=Object(h.a)(function(e){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"},item:{margin:5},progressBox:{width:"100%",display:"flex",alignItems:"center"},progress:{flexGrow:"1"}}}),Le=Object(w.b)(function(e){var t=Ae();return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.progressBox},r.a.createElement(Ne.a,{variant:"subtitle1"},"Current Task"),r.a.createElement(Se.a,{variant:"determinate",value:C.progress.percent,color:"secondary",className:t.progress})),r.a.createElement(k.a,{variant:"contained",color:"primary",className:t.item,onClick:function(){we("start")}},"Add to start"),r.a.createElement(k.a,{variant:"contained",color:"primary",className:t.item,onClick:function(){we("end")}},"Add to end"),r.a.createElement(k.a,{variant:"contained",color:"primary",className:t.item},"Add to start and push last album"),r.a.createElement(k.a,{variant:"contained",color:"primary",className:t.item,onClick:function(){localStorage.setItem("token","")}},"Clear Token"),r.a.createElement(k.a,{variant:"contained",color:"primary",className:t.item,onClick:function(){localStorage.removeItem("user")}},"Reload all playlists"))}),Ie=Object(h.a)(function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"left",color:e.palette.text.secondary}}}),Te=function(e){var t=e.token,a=Ie();return r.a.createElement("div",{className:a.root},r.a.createElement(N.a,{container:!0,spacing:3},r.a.createElement(N.a,{item:!0,xs:3},r.a.createElement(S.a,{className:a.paper},r.a.createElement(z,{token:t}))),r.a.createElement(N.a,{item:!0,xs:9},r.a.createElement(ke,{token:t})),r.a.createElement(N.a,{item:!0,xs:12},r.a.createElement(Le,{token:t}))))};function Be(e){var t=e.children,a=e.value,n=e.index,c=Object(g.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},c),a===n&&r.a.createElement(j.a,{p:3},t))}function _e(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var ze=Object(h.a)(function(e){return{root:{flexGrow:1}}}),Ge=Object(w.b)(function(e){var t=ze(),a=e.token,c=Object(n.useState)(0),o=Object(b.a)(c,2),i=o[0],l=o[1],s=Object(E.a)({url:"https://api.spotify.com/v1/me",method:"GET",headers:{Authorization:"Bearer "+a}}),u=Object(b.a)(s,2),m=u[0],f=m.data,d=(m.loading,m.error);u[1];f&&(console.log(f),C.name=f.display_name,C.id=f.id);return""!==C.id?r.a.createElement("div",{className:t.root},r.a.createElement(y.a,{position:"static"},r.a.createElement(v.a,{value:i,onChange:function(e,t){l(t)},"aria-label":"simple tabs example"},r.a.createElement(O.a,Object.assign({label:"Playlist Albums"},_e(0))),r.a.createElement(O.a,Object.assign({label:"Nothing... for now"},_e(1))))),r.a.createElement(Be,{value:i,index:0},r.a.createElement(Te,{token:a})),r.a.createElement(Be,{value:i,index:1},"Item Two")):d?r.a.createElement("div",null,r.a.createElement(k.a,{variant:"contained",color:"primary",onClick:function(){localStorage.setItem("token","")}},"Clear Token")):r.a.createElement("div",null,r.a.createElement("p",null,"Loading..."))}),Je=a(355),De=a.n(Je);a(481);function He(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(m.a)(e);if(t){var r=Object(m.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(u.a)(this,a)}}var We=function(e){Object(s.a)(a,e);var t=He(a);function a(){var e;return Object(i.a)(this,a),(e=t.call(this)).state={token:null,item:{album:{images:[{url:""}]},name:"",artists:[{name:""}],duration_ms:0},is_playing:"Paused",progress_ms:0},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=p.access_token||localStorage.getItem("token");e&&(this.setState({token:e}),localStorage.setItem("token",e),C.token=e)}},{key:"clearLocalStorage",value:function(){localStorage.setItem("token","")}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,!this.state.token&&r.a.createElement("div",{className:"App-header"},r.a.createElement("img",{src:De.a,className:"App-logo",alt:"logo"}),r.a.createElement("a",{className:"btn btn--loginApp-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("149f235f7ad941419d900b585b05d9e3","&redirect_uri=").concat("https://brandoshizzle.github.io/Little-Conductor/","&scope=").concat(f.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify")),this.state.token&&r.a.createElement(Ge,{token:this.state.token})))}}]),a}(n.Component);o.a.render(r.a.createElement(We,null),document.getElementById("root"))}},[[361,1,2]]]);
//# sourceMappingURL=main.0aa48088.chunk.js.map