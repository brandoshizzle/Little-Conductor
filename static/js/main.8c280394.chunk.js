(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{389:function(e,t,a){e.exports=a.p+"static/media/logo.ee7cd8ed.svg"},396:function(e,t,a){e.exports=a(582)},401:function(e,t,a){},581:function(e,t,a){},582:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(17),c=a.n(l),s=(a(401),a(223)),i=a(224),o=a(247),u=a(248),d=a(37),m=["user-read-email","playlist-modify-public","playlist-modify-private"],f=window.location.hash.substring(1).split("&").reduce(function(e,t){if(t){var a=t.split("=");e[a[0]]=decodeURIComponent(a[1])}return e},{});window.location.hash="";var p=f,b=a(56),g=a(392),h=a(323),y=a(359),v=a(364),k=a(352),O=a(265),j=a(346),x=a(391),E=a(55),w=a(393),A=a(50),P=a(368),C=a.n(P),S={name:"",id:"",token:"",allPlaylists:{},filteredPlaylists:[],selectedAlbums:[],allAlbums:{},selectedPlaylists:[],progress:{done:0,total:0,percent:0},log:function(e,t){var a=t||"normal";R.logArray.unshift({text:e,color:{start:"green",normal:"#ddd",end:"red"}[a]})},logArray:[],errors:[]},R=Object(E.a)(null!=localStorage.getItem("user")?C()(S,JSON.parse(localStorage.getItem("user"))):S);function N(){var e=[];for(var t in R.allPlaylists){var a=Object(w.a)({},R.allPlaylists[t]);e.push(a)}return e}Object(A.c)(function(){localStorage.setItem("user",JSON.stringify(R))}),window.user=R;var I=a(197),L=a(353),T=a(26),B=a.n(T),z=a(72),D=a(269),_=a(271),G=a(326),J=a(325),W=a(365),U=a(64),H=a.n(U),F=Object(h.a)(function(e){return{root:{width:"100%",backgroundColor:e.palette.background.paper},list:{position:"relative",overflow:"auto",maxHeight:"65vh"}}}),q=Object(E.b)(function(e){var t=F(),a=e.token;Object(n.useEffect)(function(){function e(){return(e=Object(z.a)(B.a.mark(function e(){var t,n,r;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:R.log("Getting LS albums...");case 1:return e.next=3,H.a.get(t||"https://api.spotify.com/v1/artists/4SCWiQbJCMTHK737aNUqBJ/albums?offset=0&limit=50&market=CA",{headers:{Authorization:"Bearer "+a}});case 3:for(n=e.sent,console.log(R),r=0;r<n.data.items.length;r++)R.allAlbums[n.data.items[r].id]=n.data.items[r];t=n.data.next;case 7:if(t){e.next=1;break}case 8:R.log("Loaded ".concat(Object.values(R.allAlbums).length," albums"));case 9:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}(),R.selectedAlbums=[]},[]);return r.a.createElement("div",{className:t.root},r.a.createElement(D.a,{className:t.list,component:"nav","aria-label":"main mailbox folders"},R.allAlbums&&Object.values(R.allAlbums).map(function(e,t){var a=new Date(e.release_date);return r.a.createElement(_.a,{button:!0,selected:R.selectedAlbums.indexOf(e.id)>-1,onClick:function(t){return function(e,t){if(R.selectedAlbums.indexOf(t)>-1){var a=R.selectedAlbums.filter(function(e){return e!==t});R.selectedAlbums=a}else R.selectedAlbums=R.selectedAlbums.concat(t)}(0,e.id)},key:e.id},r.a.createElement(J.a,null,r.a.createElement(W.a,{variant:"square",src:e.images[1].url})),r.a.createElement(G.a,{primary:e.name,secondary:a.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}))})))}),M=a(369),K=a.n(M),Q=(a(583),300);function V(e){return Y.apply(this,arguments)}function Y(){return(Y=Object(z.a)(B.a.mark(function e(t){var a,n,r,l,c,s,i,o,u;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ae(),a=[],n=0,r=[],R.log("It's time to add ".concat(R.selectedAlbums.length," albums to the ").concat(t," of ").concat(R.selectedPlaylists.length," playlists"),"start"),l=0;case 6:if(!(l<R.selectedAlbums.length)){e.next=16;break}return e.next=9,H.a.get("https://api.spotify.com/v1/albums/".concat(R.selectedAlbums[l],"/tracks"),{headers:{Authorization:"Bearer "+R.token}});case 9:for(c=e.sent,a=a.concat(c.data),R.log("Grabbing track info for ".concat(R.allAlbums[R.selectedAlbums[l]].name)),s=0;s<a[l].total;s++)r.push(a[l].items[s].uri);case 13:l++,e.next=6;break;case 16:i=0;case 17:if(!(i<R.selectedPlaylists.length)){e.next=38;break}return o=R.selectedPlaylists[i],u="start"===t?{uris:r,position:0}:{uris:r},e.prev=21,e.next=24,H.a.post("https://api.spotify.com/v1/playlists/".concat(o.id,"/tracks"),u,{headers:{Authorization:"Bearer "+R.token,"Content-Type":"application/json"}});case 24:R.log("Successfully plopped ".concat(r.length," beats onto ").concat(o.name,".")),e.next=31;break;case 27:e.prev=27,e.t0=e.catch(21),R.log("Houston, we had an issue with ".concat(o.name,"...")),console.log(e.t0);case 31:return ne(),n+=Q,e.next=35,re(n);case 35:i++,e.next=17;break;case 38:X(),ae(),R.log("All finished big guy.","end");case 41:case"end":return e.stop()}},e,null,[[21,27]])}))).apply(this,arguments)}function X(){return Z.apply(this,arguments)}function Z(){return(Z=Object(z.a)(B.a.mark(function e(){var t,a,n,r,l,c,s,i;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ae(),t=0,a=0;case 3:if(!(a<R.selectedPlaylists.length)){e.next=22;break}return n=R.selectedPlaylists[a].id,e.next=7,ee(n);case 7:return r=e.sent,l=Object(b.a)(r,3),c=l[0],s=l[1],i=l[2],R.allPlaylists[n].tracks=c,R.allPlaylists[n].albums=s,R.allPlaylists[n].albumList=i,ne(),t+=Q,e.next=19,re(t);case 19:a++,e.next=3;break;case 22:case"end":return e.stop()}},e)}))).apply(this,arguments)}function $(){return($=Object(z.a)(B.a.mark(function e(t){var a,n,r,l;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ae(),a=0,R.log("Description time! Changing the description of ".concat(R.selectedPlaylists.length," playlists."),"start"),n=0;case 4:if(!(n<R.selectedPlaylists.length)){e.next=25;break}return r=R.selectedPlaylists[n],l={description:t},e.prev=7,e.next=10,H.a.put("https://api.spotify.com/v1/playlists/".concat(r.id,"/"),l,{headers:{Authorization:"Bearer "+R.token,"Content-Type":"application/json"}});case 10:200===e.sent.status&&(R.log("Bam. Description of ".concat(R.selectedPlaylists[n].name," updated.")),R.allPlaylists[r.id].description=t),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(7),R.log("Uh oh! There was an issue with ."),console.log(e.t0);case 18:return ne(),a+=Q,e.next=22,re(a);case 22:n++,e.next=4;break;case 25:ae(),R.log("We're done here.","end");case 27:case"end":return e.stop()}},e,null,[[7,14]])}))).apply(this,arguments)}function ee(e){return te.apply(this,arguments)}function te(){return(te=Object(z.a)(B.a.mark(function e(t){var a,n,r,l,c,s,i,o,u;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r={},l=[],c="",s=!1;case 5:return e.next=7,H.a.get(a||"https://api.spotify.com/v1/playlists/".concat(t,"/tracks?fields="),{headers:{Authorization:"Bearer "+R.token}});case 7:i=e.sent,n=n.concat(i.data.items),a=i.data.next;case 10:if(a){e.next=5;break}case 11:for(o in console.log(R.allAlbums),n)u=n[o].track,r[o]={place:o,id:u.id,album:u.album.name},R.allAlbums.hasOwnProperty(u.album.id)&&(s=!0),-1===c.indexOf(u.album.name)&&(l.push({id:u.album.id,name:u.album.name}),c+=u.album.name+", ");return!s&&Object.entries(r).length>0&&(r=void 0),e.abrupt("return",[r,l,c.substring(0,c.length-2)]);case 15:case"end":return e.stop()}},e)}))).apply(this,arguments)}function ae(){R.progress.done=0,R.progress.total=R.selectedPlaylists.length,R.progress.percent=0}function ne(){R.progress.done++,R.progress.percent=R.progress.done/R.progress.total*100}function re(e){return le.apply(this,arguments)}function le(){return(le=Object(z.a)(B.a.mark(function e(t){return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(t);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}var ce=function(e){return new Promise(function(t){return setTimeout(t,e)})},se=a(375),ie=a.n(se),oe=a(385),ue=a.n(oe),de=a(376),me=a.n(de),fe=a(383),pe=a.n(fe),be=a(297),ge=a.n(be),he=a(296),ye=a.n(he),ve=a(377),ke=a.n(ve),Oe=a(378),je=a.n(Oe),xe=a(380),Ee=a.n(xe),we=a(381),Ae=a.n(we),Pe=a(382),Ce=a.n(Pe),Se=a(386),Re=a.n(Se),Ne=a(379),Ie=a.n(Ne),Le=a(384),Te=a.n(Le),Be=a(387),ze=a.n(Be),De={Add:Object(n.forwardRef)(function(e,t){return r.a.createElement(ie.a,Object.assign({},e,{ref:t}))}),Check:Object(n.forwardRef)(function(e,t){return r.a.createElement(me.a,Object.assign({},e,{ref:t}))}),Clear:Object(n.forwardRef)(function(e,t){return r.a.createElement(ye.a,Object.assign({},e,{ref:t}))}),Delete:Object(n.forwardRef)(function(e,t){return r.a.createElement(ke.a,Object.assign({},e,{ref:t}))}),DetailPanel:Object(n.forwardRef)(function(e,t){return r.a.createElement(ge.a,Object.assign({},e,{ref:t}))}),Edit:Object(n.forwardRef)(function(e,t){return r.a.createElement(je.a,Object.assign({},e,{ref:t}))}),Export:Object(n.forwardRef)(function(e,t){return r.a.createElement(Ie.a,Object.assign({},e,{ref:t}))}),Filter:Object(n.forwardRef)(function(e,t){return r.a.createElement(Ee.a,Object.assign({},e,{ref:t}))}),FirstPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(Ae.a,Object.assign({},e,{ref:t}))}),LastPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(Ce.a,Object.assign({},e,{ref:t}))}),NextPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(ge.a,Object.assign({},e,{ref:t}))}),PreviousPage:Object(n.forwardRef)(function(e,t){return r.a.createElement(pe.a,Object.assign({},e,{ref:t}))}),ResetSearch:Object(n.forwardRef)(function(e,t){return r.a.createElement(ye.a,Object.assign({},e,{ref:t}))}),Search:Object(n.forwardRef)(function(e,t){return r.a.createElement(Te.a,Object.assign({},e,{ref:t}))}),SortArrow:Object(n.forwardRef)(function(e,t){return r.a.createElement(ue.a,Object.assign({},e,{ref:t}))}),ThirdStateCheck:Object(n.forwardRef)(function(e,t){return r.a.createElement(Re.a,Object.assign({},e,{ref:t}))}),ViewColumn:Object(n.forwardRef)(function(e,t){return r.a.createElement(ze.a,Object.assign({},e,{ref:t}))})},_e=Object(h.a)(function(e){return{root:{display:"flex",justifyContent:"center",flexWrap:"wrap",listStyle:"none",padding:e.spacing(.5),margin:0},chip:{margin:e.spacing(.5)}}}),Ge=Object(E.b)(function(e){_e();function t(e){return a.apply(this,arguments)}function a(){return(a=Object(z.a)(B.a.mark(function e(t){return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l(t);case 2:case"end":return e.stop()}},e)}))).apply(this,arguments)}Object(n.useEffect)(function(){function e(){return(e=Object(z.a)(B.a.mark(function e(){var a,n,r,l,c,s,i,o,u,d,m,f,p;return B.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:R.log("Fetching all of ".concat(R.name,"'s playlists"));case 1:return e.next=3,H.a.get(a||"https://api.spotify.com/v1/me/playlists?limit=50",{headers:{Authorization:"Bearer "+R.token}});case 3:for(l in n=e.sent,r=n.data.items,R.log("Retrieved ".concat(n.data.items.length," playlists")),r)(c=r[l]).owner.id===R.id&&(R.allPlaylists.hasOwnProperty(c.id)||-1!==R.filteredPlaylists.indexOf(c.id)||(R.allPlaylists[c.id]={id:c.id,name:c.name,url:c.external_urls.spotify,tracks_endpoint:c.tracks.href,description:decodeURIComponent(c.description),tracks:{},albumList:"Loading...",albums:[]}));a=n.data.next;case 8:if(a){e.next=1;break}case 9:s=-300,e.t0=B.a.keys(R.allPlaylists);case 12:if((e.t1=e.t0()).done){e.next=28;break}if(i=e.t1.value,"Loading..."!==(o=R.allPlaylists[i]).albumList){e.next=26;break}return e.next=18,t(s);case 18:return e.next=20,ee(o.id);case 20:u=e.sent,d=Object(b.a)(u,3),m=d[0],f=d[1],p=d[2],m?(R.allPlaylists[o.id].tracks=m,R.allPlaylists[o.id].albums=f,R.allPlaylists[o.id].albumList=p):(R.log("".concat(o.name," was not relaxing enough.")),R.filteredPlaylists.push(o.id),delete R.allPlaylists[o.id]);case 26:e.next=12;break;case 28:case"end":return e.stop()}},e)}))).apply(this,arguments)}!function(){e.apply(this,arguments)}()},[]);var l=function(e){return new Promise(function(t){return setTimeout(t,e)})};return r.a.createElement("div",{style:{maxWidth:"100%"}},r.a.createElement(K.a,{columns:[{title:"Name",field:"name",width:250},{title:"Description",field:"description",width:300},{title:"Albums",field:"albumList"}],data:N(),icons:De,options:{showTitle:!1,selection:!0,pageSize:20,maxBodyHeight:"52vh",draggable:!1},onSelectionChange:function(e){return R.selectedPlaylists=e}}))}),Je=a(360),We=a(345),Ue=a(123),He=Object(h.a)(function(e){return{bg:{background:e.palette.background.paper},root:{display:"flex",flexWrap:"wrap",justifyContent:"flex-start"},item:{margin:5},progressBox:{width:"100%",display:"flex",alignItems:"center"},progress:{flexGrow:"1"}}}),Fe=Object(E.b)(function(e){var t=He(),a=Object(n.useState)(""),l=Object(b.a)(a,2),c=l[0],s=l[1];return r.a.createElement("div",null,r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.progressBox},r.a.createElement(Ue.a,{variant:"body1"},"Current Task"),r.a.createElement(Je.a,{variant:"determinate",value:R.progress.percent,color:"secondary",className:t.progress})),r.a.createElement(j.a,{variant:"contained",color:"primary",className:t.item,onClick:function(){V("start")}},"Add to start"),r.a.createElement(j.a,{variant:"contained",color:"primary",className:t.item,onClick:function(){V("end")}},"Add to end"),r.a.createElement(j.a,{variant:"contained",color:"primary",className:t.item},"Add to start and push last album"),r.a.createElement(j.a,{variant:"contained",color:"primary",className:t.item,onClick:function(){localStorage.setItem("token","")}},"Clear Token"),r.a.createElement(j.a,{variant:"contained",color:"primary",className:t.item,onClick:function(){localStorage.removeItem("user")}},"Reload all playlists")),r.a.createElement("div",{style:{textAlign:"left"}},r.a.createElement(We.a,{id:"new-description",label:"Description",onChange:function(e){s(e.target.value)},style:{width:"60%"}}),r.a.createElement(j.a,{variant:"contained",color:"primary",className:t.item,onClick:function(){!function(e){$.apply(this,arguments)}(c)}},"Replace description")))}),qe=a(366),Me=Object(h.a)(function(e){return{root:{display:"flex",justifyContent:"center",flexWrap:"wrap",listStyle:"none",padding:e.spacing(.5),margin:0},chip:{margin:e.spacing(.5)}}}),Ke=Object(E.b)(function(){var e=Me();return r.a.createElement(I.a,{component:"ul",className:e.root},R.selectedAlbums.map(function(t,a){var n;return r.a.createElement("li",{key:a},r.a.createElement(qe.a,{icon:void 0,label:R.allAlbums[t].name,onDelete:(n=t,function(){R.selectedAlbums=R.selectedAlbums.filter(function(e){return e!==n})}),className:e.chip}))}))}),Qe=Object(h.a)(function(e){return{root:{flexGrow:1},paper:{padding:e.spacing(2),textAlign:"left",color:e.palette.text.secondary}}}),Ve=function(e){var t=e.token,a=Qe();return r.a.createElement("div",{className:a.root},r.a.createElement(L.a,{container:!0,spacing:3},r.a.createElement(L.a,{item:!0,xs:3},r.a.createElement(I.a,{className:a.paper},r.a.createElement(q,{token:t}),r.a.createElement(Ke,null))),r.a.createElement(L.a,{item:!0,xs:9},r.a.createElement(Ge,{token:t})),r.a.createElement(L.a,{item:!0,xs:12},r.a.createElement(Fe,{token:t}))))},Ye=a(272),Xe=a(388),Ze=a.n(Xe),$e=Object(E.b)(function(e){var t=Object(n.useState)(48),a=Object(b.a)(t,2),l=a[0],c=a[1],s=Object(n.useState)("hidden"),i=Object(b.a)(s,2),o=i[0],u=i[1];return Object(n.useEffect)(function(){R.logArray=[]},[]),r.a.createElement("div",{style:{position:"absolute",right:0,top:0,display:"flex",alignItems:"flex-start",justifyContent:"flex-end",width:"50%",height:l,background:"black",zIndex:1e3,transition:"0.5s",overflowY:o}},r.a.createElement("div",{style:{color:"#ddd",flexGrow:1,paddingTop:15,textAlign:"left",paddingLeft:12}},R.logArray.map(function(e,t){return r.a.createElement(Ue.a,{component:"p",variant:"body2",id:"last-log",style:{display:"block",color:e.color},key:t},e.text)})),r.a.createElement(Ye.a,{"aria-label":"delete",style:{color:"white"},onClick:function(){c(48===l?"80vh":48),u("hidden"===o?"scroll":"hidden")}},r.a.createElement(Ze.a,null)))});function et(e){var t=e.children,a=e.value,n=e.index,l=Object(g.a)(e,["children","value","index"]);return r.a.createElement("div",Object.assign({role:"tabpanel",hidden:a!==n,id:"simple-tabpanel-".concat(n),"aria-labelledby":"simple-tab-".concat(n)},l),a===n&&r.a.createElement(O.a,{p:3},t))}function tt(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}var at=Object(h.a)(function(e){return{root:{flexGrow:1}}}),nt=Object(E.b)(function(e){var t=at(),a=e.token,l=Object(n.useState)(0),c=Object(b.a)(l,2),s=c[0],i=c[1],o=Object(x.a)({url:"https://api.spotify.com/v1/me",method:"GET",headers:{Authorization:"Bearer "+a}}),u=Object(b.a)(o,2),d=u[0],m=d.data,f=(d.loading,d.error);u[1];m&&(console.log(m),R.name=m.display_name,R.id=m.id);return""!==R.id?r.a.createElement("div",{className:t.root},r.a.createElement(y.a,{position:"static",style:{width:"50%"}},r.a.createElement(v.a,{value:s,onChange:function(e,t){i(t)},"aria-label":"simple tabs example"},r.a.createElement(k.a,Object.assign({label:"Playlist Albums"},tt(0))),r.a.createElement(k.a,Object.assign({label:"Nothing... for now"},tt(1))))),r.a.createElement($e,null),r.a.createElement(et,{value:s,index:0},r.a.createElement(Ve,{token:a})),r.a.createElement(et,{value:s,index:1},"Item Two")):f?r.a.createElement("div",null,r.a.createElement("p",null,"If you're seeing this, click this button, then refresh the page."),r.a.createElement(j.a,{variant:"contained",color:"primary",onClick:function(){localStorage.setItem("token","")}},"Clear Token")):r.a.createElement("div",null,r.a.createElement("p",null,"Loading..."))}),rt=a(389),lt=a.n(rt);a(581);function ct(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(d.a)(e);if(t){var r=Object(d.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(u.a)(this,a)}}var st=function(e){Object(o.a)(a,e);var t=ct(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).state={token:null,item:{album:{images:[{url:""}]},name:"",artists:[{name:""}],duration_ms:0},is_playing:"Paused",progress_ms:0},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=p.access_token||localStorage.getItem("token");e&&(this.setState({token:e}),localStorage.setItem("token",e),R.token=e)}},{key:"clearLocalStorage",value:function(){localStorage.setItem("token","")}},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",null,!this.state.token&&r.a.createElement("div",{className:"App-header"},r.a.createElement("img",{src:lt.a,className:"App-logo",alt:"logo"}),r.a.createElement("a",{className:"btn btn--loginApp-link",href:"".concat("https://accounts.spotify.com/authorize","?client_id=").concat("149f235f7ad941419d900b585b05d9e3","&redirect_uri=").concat("https://brandoshizzle.github.io/Little-Conductor/","&scope=").concat(m.join("%20"),"&response_type=token&show_dialog=true")},"Login to Spotify")),this.state.token&&r.a.createElement(nt,{token:this.state.token})))}}]),a}(n.Component);c.a.render(r.a.createElement(st,null),document.getElementById("root"))}},[[396,1,2]]]);
//# sourceMappingURL=main.8c280394.chunk.js.map